(function(a){a.pocketlists_routing={options:{},init:function(b){var c=this;c.options=b;if(typeof(a.History)!="undefined"){a.History.bind(function(){c.dispatch()})}var d=window.location.hash;if(d==="#/"||!d){this.dispatch()}else{a.wa.setHash(d)}},prevHash:null,hash:null,getHash:function(){return this.cleanHash()},cleanHash:function(b){if(typeof b=="undefined"){b=window.location.toString().split("#")[1]||""}if(!b){return""}else{if(!b.length){b=""+b}}while(b.length>0&&b[b.length-1]==="/"){b=b.substr(0,b.length-1)}b+="/";if(b[0]!="#"){if(b[0]!="/"){b="/"+b}b="#"+b}else{if(b[1]&&b[1]!="/"){b="#/"+b.substr(1)}}if(b=="#/"){return""}return b},skipDispatch:0,stopDispatch:function(b){this.skipDispatch=b},dispatch:function(j){if(this.skipDispatch>0){this.skipDispatch--;return false}if(j===undefined||j===null){j=window.location.hash}j=j.replace(/(^[^#]*#\/*|\/$)/g,"");if(this.hash!==null){this.prevHash=this.hash}this.hash=j;if(j){j=j.split("/");if(j[0]){var d="";var e=j.length;var k=null;var c=null;for(var f=0;f<j.length;f++){var g=j[f];if(f<2){if(f===0){d=g}else{if(parseInt(g,10)!=g&&g.indexOf("=")==-1){d+=g.substr(0,1).toUpperCase()+g.substr(1)}else{break}}if(typeof(this[d+"Action"])=="function"){k=d;c=f+1}}else{break}}e=f;if(typeof(this[d+"Action"])!=="function"&&k){d=k;e=c}var b=j.slice(e);this.preExecute(d);if(typeof(this[d+"Action"])=="function"){console.info("dispatch",[d+"Action",b]);this[d+"Action"].apply(this,b)}else{console.info("Invalid action name:",d+"Action")}this.postExecute(d)}else{this.preExecute();this.defaultAction();this.postExecute()}}else{this.preExecute();this.defaultAction();this.postExecute()}},preExecute:function(){},postExecute:function(){},defaultAction:function(){this.pocketAction()},listsAction:function(){this.pocketAction()},listAction:function(b){this.load("?module=list&id="+b,function(c){a("#pl-list-content").html(c)})},pocketAction:function(f){var b=this;var e=decodeURIComponent(this.getHash().substr(("#/pocket/"+f+"/list/").length).replace("/",""))||0;var d=this.getHash().indexOf("list")>0?true:false;if(e){if(e==="new"){e=-1}}var f=f||1;var c=a("#pl-list-name");if(c.length){c.after('<i class="icon16 loading">')}this.load("?module=pocket&id="+f+"&list_id="+e,function(g){a("#content").html(g)})},archiveAction:function(b){var b=b||0;this.load("?module=archive&id="+b,function(c){a("#content").html(c)})},logbookAction:function(b){this.load("?module=logbook",function(c){a("#content").html(c)})},settingsAction:function(){this.load("?module=settings",function(b){a("#content").html(b)})},todoAction:function(){this.load("?module=todo",function(b){a("#content").html(b)})},teamAction:function(){this.load("?module=team",function(b){a("#content").html(b)})},load:function(d,c,e){if(typeof c==="function"){e=c;c={}}else{c=c||{}}var f=Math.random();this.random=f;var b=this;return a.get(d,function(g){if((typeof c.check==="undefined"||c.check)&&b.random!=f){return}if(typeof e==="function"){e.call(this,g)}})}}}(jQuery));