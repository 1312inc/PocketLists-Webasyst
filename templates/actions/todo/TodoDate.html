{if $print}
<html>
<head>
    <title>{if !$date}[`My to-dos`]{else}{$date|wa_date:'humandate'}{/if} &mdash; {$wa->accountName()}</title>
    <link type="text/css" rel="stylesheet" href="{$wa_app_static_url}css/pocketlists-print.css">
</head>
<body>
<div class="pl-print-button">
    <button onclick="window.print();">[`Print`]</button>
</div>
{/if}


<main class="blank bordered-right pl-inner-content pl-items pl-list-items pl-todo shadowed" id="pl-list-content">

    <div id="pl-stream-notice" class="pl-alert" style="display: none;">
        <a href="javascript:void(0)" class="close pl-alert-close bigger">&times;</a>
        <div class="pl-welcome" id="pl-welcome-msg">
            <div class="pl-jumbodone" title="[`Welcome to To-dos app!`]"></div>
            <h2>[`Welcome to To-dos app!`]</h2>
            <p>[`Use To-dos app to keep track on what you need to do up next, to assign to-dos to your teammates, and to collaborate on shared to-do lists.`]</p>
        </div>
    </div>

    <header class="pl-title">
        <div class="float-right">
        <ul class="menu-h">
            <li class="pl-list-favorite">
               <a href="#/settings/" title="[`Settings`]"><i class="icon16 settings"></i></a>
            </li>
        </ul>
        </div>
        {if !$date}
        <h1 class="not-padded">
            [`My to-dos`]
        </h1>
        <span></span>
        {else}
        <h1 class="not-padded" pl-todo-stream="date">
            {if !$print} <a href="#" class="back">&larr; [`My to-dos`]</a>{/if}
            <span>{$date|wa_date:'humandate'}</span>
        </h1>
        {/if}
    </header>

    <div class="pl-list-items" id="pl-list-items">

        <section id="pl-undone-items" data-pl-items="undone">
            <ul class="menu-v">
                {if !empty($undone_items)}
                {include '../item/Item.html' parent_id=0 items=$undone_items}
                {/if}
            </ul>
        </section>

        {if !$print}
        <section id="pl-complete-log" class="pl-logbook">
            <h5 class="heading">[`Logbook`]</h5>
            <ul class="menu-v">
                {if $count_done_items}
                {include '../item/Item.html' parent_id=0 items=$done_items}
                {/if}
            </ul>
        </section>

        <a href="#" id="pl-complete-log-link" class="inline-link gray" {if !$count_done_items}style="display:none;"{/if}><b><i>{_w('Show all %d completed to-do', 'Show all %d completed to-dos', $count_done_items)}</i></b></a>
        {/if}

    </div>

    <div class="clear-both"></div>

    {if !$print}
        {include '../../include/itemadd.html' inline}
    {/if}
</main>
{if !$print}
<script type="text/javascript">
    (function(){
        $.pocketlists.initNotice('#pl-stream-notice');

        new $.pocketlists.Items($('#pl-list-items'), {
            enableAddLinkOnHover: false,
            enableChangeLevel: false,
            enableSortItems: false,
//            assignUser: parseInt('{$wa->user()->getId()}'),
            showMessageOnEmptyList: {if $date}false{else}true{/if},
            dueDate: '{if $timestamp}{$timestamp|wa_date}{/if}',
            current_user_id: {$wa->user()->get('id')}
        });
    }());
</script>
{else}
</body>
</html>
{/if}
