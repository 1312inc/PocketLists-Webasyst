{if isset($current_teammate.name) && $print}
<html>
<head>
    <title>{$list.name} &mdash; {$wa->accountName()}</title>
    <link type="text/css" rel="stylesheet" href="{$wa_app_static_url}css/pocketlists-print.css">
</head>
<body>
<div class="pl-print-button">
    <button onclick="window.print();">[`Print`]</button>
</div>
{/if}



{if empty($teammates)}
{if !$print}
<main class="pl-inner-content pl-items shadowed" id="pl-list-content">
    <div class="pl-empty-list top-padded" id="pl-empty-list-msg">
    <img class="userpic" src="{$current_teammate.photo_url}" alt="{$current_teammate.name}" title="{$current_teammate.name}" />
    <h2>[`Invite your teammates!`]</h2>
    <p>[`Use <strong>Contacts app</strong> to add your teammates to Pocket Lists and to start collaborating on to-do lists together.`]</p>
</main>
{/if}
{else}

{if !$print}
<!-- TEAM -->
<nav class="pl-inner-sidebar" data-pl="uho">
    <div class="block double-padded">
        <h5 class="heading">[`Access rights`]</h5>

        <ul class="menu-v with-icons" data-pl-sidebar-block="lists">
            {foreach $lists as $l}
            <li>
                <a href="#/list/{$l.id}/">
                    <i class="icon16 listicon16" style="background-image: url({$wa_url}wa-apps/pocketlists/img/listicons/{$l.icon|default:'li-list@2x.png'});"></i>{if $l.color != 'none'}<span class="pl-{$l.color}">{$l.name|escape}</span>{else}{$l.name|escape}{/if}
                </a>
            </li>
            {/foreach}
        </ul>

        <p class="hint">[`Use Contacts app to customize access rights for pockets.`]</p>

        <ul class="menu-v with-icons">
            <li><a href="#" data-pl-action="list-email"><i class="icon16 email"></i> [`Email list`]</a></li>
            <li><a href="?module=team&amp;teammate={$current_teammate.name}&amp;print=true" target="_blank"><i class="icon16 print"></i> [`Print list`]</a></li>
        </ul>

    </div>
    {include '../../include/itemdetails.html' inline}
</nav>
{/if}

<!-- ITEMS -->
<main class="pl-inner-content pl-items shadowed pl-teammate-items" id="pl-list-content">

    <header class="pl-title">
        <input type="hidden" id="pl-list-id" value="{$current_teammate.id}"/>
        <h1 class="not-padded">
            {$current_teammate.name|default:' '|escape}
        </h1>
        <input type="hidden" id="pl-assigned-contact-id" value="{$current_teammate.id}"/>
    </header>

    <div class="pl-list-items" id="pl-list-items">
        <div class="pl-empty-list" id="pl-empty-list-msg" {if !empty($items)}style="display:none;"{/if}>
            <img class="userpic" src="{$current_teammate.photo_url}" alt="{$current_teammate.name|escape}" title="{$current_teammate.name|escape}" />
            <h2>{sprintf('[`%sâ€™s to-do list is empty`]',$current_teammate.name|escape)}</h2>
            <p>[`To assign a to-do to a user, either select him in to-do item details or add a to-do item above.`]</p>
        </div>

        <section id="pl-undone-items" data-pl-items="undone">
            <ul class="menu-v">
                {if !empty($items)}
                {include '../item/Item.html' parent_id=0 items=$items}
                {/if}
            </ul>
        </section>

        <!-- completed to-dos log -->
        <section id="pl-complete-log" class="pl-logbook">
            <h5 class="heading">[`Logbook`]</h5>
            <ul class="menu-v">
                {if !empty($items_done)}
                {include '../item/Item.html' items=$items_done}
                {/if}
            </ul>
        </section>

        <a href="#" id="pl-complete-log-link" class="inline-link gray" {if !$count_done_items}style="display:none;"{/if}><b><i>{_w('Show all %d completed to-do', 'Show all %d completed to-dos', $count_done_items)}</i></b></a>

    </div>
    <div class="clear-both"></div>

    {if !$print}
        {include '../../include/itemadd.html' inline}
    {/if}
</main>
{/if}

{if isset($current_teammate.name) && $print}
</body>
</html>
{else}

<script text="text/javascript">
    var $all_items_wrapper = $('#pl-list-items');

    new $.pocketlists.Items($all_items_wrapper, {
        enableAddLinkOnHover: false,
        enableChangeLevel: false,
        enableSortItems: false,
        assignUser: parseInt($('#pl-assigned-contact-id').val()),
        showMessageOnEmptyList: true,
//        list: new $.pocketlists.List($('.pl-title')),
        current_user_id: {$wa->user()->get('id')}
    });
    $.pocketlists.setTitle('{$current_teammate.name|escape}');
</script>
{/if}
