{* @var pocketlistsPocket $pocket *}
<div class="shadowed" data-pl2-pocket-wrapper="{$pocket->getId()}">
    <nav class="sidebar left300px">

        <!-- LISTS -->
        <div id="pl-lists" data-pl-scroll-to-top>
            <div class="pl-lists-header">
                {if $isAdmin}<a href="#/pocket/{$pocket->getId()}/list/new/" class="count" title="[`New list`]"><i class="icon16 add"></i></a>{/if}
                <h5 class="pl-dark-{$pocket->getColor()|default:'none'}-label">
                    {$pocket->getName()|escape}
                    {if $isAdmin}<a href="#" title="[`Pocket settings`]" data-pl2-action="edit-pocket" data-pl2-pocket-id="{$pocket->getId()}"><i class="icon16 pl ellipsis pl-pocket-settings"></i></a>{/if}
                </h5>
            </div>
            {if !empty($lists)}
                <ul class="pl-lists" data-pl2-wrapper="lists">
                    {foreach $lists as $l}
                        <li data-pl-list-id="{$l->getId()}">
                            <a href="#/pocket/{$pocket->getId()}/list/{$l->getId()}/"{if $l->getId() == $list_id} class="pl-is-selected"{/if} title="{$l->getName()|escape}">
                                <span class="count {$l->getCssClass('list-indicator')}">{$l->getItemsCount()}</span>
                                <i class="listicon36"
                                   style="background-image: url({$wa_url}wa-apps/pocketlists/img/listicons/{$l->getIcon()|default:'li-list@2x.png'});"></i>
                                <span class="pl-list-name pl-dark-{$l->getColor()|default:'none'}-label">{$l->getName()|escape}</span>
                            </a>
                        </li>
                    {/foreach}
                </ul>
            {else}
                <div class="block double-padded align-center pl-lists-empty">
                    <p>
                        {if $isAdmin}
                            [`This pocket is empty. Start by creating a to-do list.`]
                        {else}
                            [`You donâ€™t have access to any list in the pocket. Please contact your admin to request access setup.`]
                        {/if}
                    </p>
                </div>
            {/if}
            <!-- <a href="#/pocket/{$pocket->getId()}/list/new/" class="pl-lists-add">
                <i></i>
                <span>[`New list`]</span>
            </a> -->
        </div>

    </nav>

    <!-- ITEMS -->
    <main class="content left300px blank bordered-left" id="pl-list-content">
        {$lists_html|default:""}
    </main>

</div>
<script>
    (function () {
        var $pocketWrapper = $('[data-pl2-pocket-wrapper]');
        var $lists_wrapper = $pocketWrapper.find('[data-pl2-wrapper="lists"]');

        new $.pocketlists.Pocket($pocketWrapper, {
            current_user_id: {$wa->user()->get('id')},
            isAdmin: {$isAdmin},
            listsWrapper: $lists_wrapper
        });

        $.pocketlists.setTitle('{$pocket->getName()|default:" "|escape}');
    }());
</script>
