import{d as _,r as k,o as r,e as i,f as s,I as c,t as l,F as B,y as $,D as E,j as g,as as b,aM as T,aN as y,aO as p}from"./index-8GM9p_88.js";const S={class:"box contentbox"},j={class:"small"},A={class:"small"},D={class:"flexbox small space-12 bordered-bottom"},L={class:"tw-w-24 align-right bold"},M={class:"tw-w-24 align-right"},N={class:"tw-w-24 align-right"},O={class:"tw-w-24"},C={class:"tw-w-24 align-right bold"},P={class:"tw-w-24 align-right"},U={class:"tw-w-24 align-right"},V={class:"custom-my-24"},x={class:"hint"},F={class:"icon"},I=_({__name:"BetaView",setup(R){const d=["task","list","pocket","comment","user","location"],w={task:"Tasks",list:"Lists",pocket:"Pockets",comment:"Comments",user:"Users",location:"Locations"},u=k({}),h=async(o,t)=>{var m;const a=b.getTableByEntity(o);if(!a)return;const e=await a.toArray(),n=e.filter(f=>typeof f.id=="string").length;return{total:e.length,unsynced:n,errors:(m=t[o])==null?void 0:m.length}};(async()=>{const o=await b.jobsUpdate.filter(e=>!!e.error).toArray(),t=Object.groupBy(o,e=>e.entity),a=await Promise.all(d.map(e=>h(e,t)));u.value=Object.fromEntries(d.map((e,n)=>[e,a[n]]))})();const v=async()=>{confirm("Are You sure?")&&(T(),await y(),location.reload())};return(o,t)=>(r(),i("div",S,[s("div",null,[s("h2",null,[c(l(o.$t("betaTitle"))+" ",1),t[0]||(t[0]=s("span",{class:"hint"},"Beta",-1))]),s("p",j,l(o.$t("betaWelcomeMsg")),1),t[2]||(t[2]=s("p",null," Создаем лучший чек-лист-менеджер для бизнеса, и он будет внутри вашего Вебасиста. Новый ПЛ на новый рельсах. Быстрее в 100 раз. АПИ, мобильные приложения скоро. Новое — календарь, повтор, карта, назначение списков и т.д. пишем про новые бесплатные фичи Новый премиум для поддержки развития проекта. Смотрите премиум-фичи в отдельном разделе. ",-1)),t[3]||(t[3]=s("p",{class:"small"},[s("a",{href:"mailto:hello@1312.io",class:"button light-gray text-blue"},[s("i",{class:"fas fa-envelope custom-mr-4"}),c(" hello@1312.io")])],-1)),t[4]||(t[4]=s("hr",null,null,-1)),s("p",A,l(o.$t("localDbStateMsg")),1),s("div",D,[t[1]||(t[1]=s("div",{class:"tw-w-24"},null,-1)),s("div",L,l(o.$t("Total")),1),s("div",M,l(o.$t("Unsynced")),1),s("div",N,l(o.$t("Error")),1)]),(r(!0),i(B,null,$(u.value,(a,e)=>(r(),i("div",{key:e,class:"flexbox small space-12 bordered-bottom"},[s("div",O,l(w[e]),1),s("div",C,l(a==null?void 0:a.total),1),s("div",P,l(a==null?void 0:a.unsynced),1),s("div",U,l(a==null?void 0:a.errors),1)]))),128))]),s("div",V,[s("button",{class:"warning smaller",onClick:v},l(o.$t("betaResetBtn")),1),s("p",x,l(o.$t("betaResetBtnHint")),1)]),s("div",null,[s("span",F,[s("i",{class:"rounded",style:E(`background: ${g(p).status.value==="OPEN"?"var(--green)":"var(--orange)"};`)},null,4)]),c(" Socket connection ("+l(g(p).status.value)+") ",1)])]))}});export{I as default};
