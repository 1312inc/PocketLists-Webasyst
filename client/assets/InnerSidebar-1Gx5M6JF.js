import{E as V,o as c,j as f,K,h as w,r as I,C as H,L as k,D as j,M as C,u as q,B as z,N as F,A as $,q as b,k as t,t as v,I as L,m as d,n as m,P as W,Q as A,x as J,w as _,R as B,F as D,y as O,S as Q,z as U}from"./index-q0Rk444w.js";import{_ as Y}from"./VerticalGap.vue_vue_type_script_setup_true_lang-XDRKBrco.js";import{C as M}from"./ContenteditableBlock-znpTQAtp.js";import{u as G,_ as X}from"./SortableList.vue_vue_type_style_index_0_lang-PLYafgds.js";import"./rangy-5rxgwlWZ.js";const Z={},tt={class:"bricks"};function et(u,i){return c(),f("div",tt,i[0]||(i[0]=[K('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const st=V(Z,[["render",et],["__scopeId","data-v-53ea13ed"]]),at=w({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(u,{emit:i}){const s=i,a=u,r=I(),{draggableEntity:l}=G();return H(()=>{if(r.value){const n=r.value;k(n,"dragenter",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.add("dragover")}),k(n,"dragleave",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.target===e.currentTarget&&e.currentTarget.classList.remove("dragover")}),k(n,"dragover",e=>{e.preventDefault()}),k(n,"drop",e=>{if(a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&(e.preventDefault(),e.currentTarget.classList.remove("dragover"),e.dataTransfer))try{const p=JSON.parse(e.dataTransfer.getData("Text")).taskIds;s("drop",p)}catch{}})}}),(n,e)=>(c(),f("div",{ref_key:"menuItemElementRef",ref:r},[j(n.$slots,"default")],512))}}),nt={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},rt={class:"hint"},ot={class:"hint"},it={class:"hint"},lt={class:"tw-flex tw-gap-4 tw-justify-between"},dt={key:0,class:"badge red"},ct={class:"tw-flex tw-gap-2"},ut=w({__name:"ListsListItem",props:{item:{}},setup(u,{expose:i}){const s=u,a=C(),r=q(),l=z(),n=I(!1);i({editMode:n});const e=g=>{a.updateItemName(s.item,g)},p=()=>{a.deleteItem(s.item),l.push({name:"lists"})},y=async g=>{await r.sort(s.item.id,null,g)},S=()=>{n.value=!1},R=async()=>{S(),l.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(g,o)=>{const P=F("RouterLink");return c(),$(at,{"draggable-entity-name":"tasks",onDrop:y},{default:b(()=>{var T,x,h,E,N;return[t("div",nt,[o[5]||(o[5]=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1)),t("div",null,[t("div",null,[t("span",rt,"id: "+v((T=s.item)==null?void 0:T.id),1),o[1]||(o[1]=L(" | ")),t("span",ot,"prev_id: "+v(String((x=s.item)==null?void 0:x.prev_item_id)),1),o[2]||(o[2]=L(" | ")),t("span",it,"srank: "+v(String((h=s.item)==null?void 0:h.sort))+" | "+v(String((E=d(a).getItemById(s.item.id))==null?void 0:E.rank)),1)]),t("div",lt,[m(P,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:b(()=>[t("div",{class:W({"tw-bg-yellow":d(A)(d(l).currentRoute.value.params.id)===s.item.id||d(l).currentRoute.value.params.id===s.item.uuid})},[m(M,{value:g.item.name,editable:n.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:S,onUpdate:e,onKeydown:J(_(R,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),L(" "+v((N=s.item.extended_data)==null?void 0:N.count)+" ",1),s.item.extended_data.priority_count>0?(c(),f("div",dt,v(s.item.extended_data.priority_count),1)):B("",!0),t("div",ct,[t("a",{class:"count",onClick:o[0]||(o[0]=_(_t=>n.value=!n.value,["prevent"]))},o[3]||(o[3]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count",onClick:_(p,["prevent"])},o[4]||(o[4]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),pt={class:"heading black tw-m-0 tw-mb-2"},mt={class:"pl-bg-block"},ft={key:0,class:"tw-px-4 tw-py-3 gray"},vt=w({__name:"ListsList",props:{pocketId:{},title:{}},setup(u){const i=u,s=C(),a=I(!1),r=[],l=async()=>{await s.createList({pocket_id:i.pocketId}),await O(),r.at(-1).editMode=!0};return(n,e)=>(c(),f(D,null,[t("h5",pt,[m(M,{value:n.title,tag:"span",editable:a.value,focusable:!0},null,8,["value","editable"]),t("a",{class:"count",onClick:e[0]||(e[0]=_(p=>a.value=!a.value,["prevent"]))},e[1]||(e[1]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count action",onClick:_(l,["prevent"])},e[2]||(e[2]=[t("i",{class:"fas fa-plus-circle"},null,-1)]))]),t("div",mt,[m(X,{items:d(s).getListsInPocket(n.pocketId),"sortable-list-id":n.pocketId,"sortable-group-name":"lists",onSort:d(s).sort},{default:b(({item:p})=>[m(ut,{ref:y=>r.push(y),item:p},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),d(s).getListsInPocket(n.pocketId).length?B("",!0):(c(),f("div",ft," No Lists Yet "))])],64))}}),gt={class:"align-center"},It=w({__name:"InnerSidebar",setup(u){const i=Q();return(s,a)=>(c(),$(Y,{space:4},{default:b(()=>[a[2]||(a[2]=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1)),m(st),(c(!0),f(D,null,U(d(i).pockets,r=>(c(),f("div",{key:r.uuid||r.id},[m(vt,{title:r.name,"pocket-id":r.id},null,8,["title","pocket-id"])]))),128)),t("div",gt,[t("button",{class:"gray",onClick:a[0]||(a[0]=r=>d(i).createPocket())},a[1]||(a[1]=[t("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{It as default};
