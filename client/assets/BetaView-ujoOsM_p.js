import{d as f,r as v,o as r,c,b as t,t as l,F as g,m as h,aq as u,aF as k,aG as B}from"./index-GRMXxMck.js";const x={class:"flexbox space-24 blank custom-p-24 tw-w-full"},E={class:"flexbox space-12 bordered-bottom"},A={class:"tw-w-24"},L={class:"tw-w-24"},S={class:"tw-w-24"},T={class:"tw-w-24"},j={class:"tw-w-24"},C={class:"tw-w-24"},F={class:"tw-w-24"},O=f({__name:"BetaView",setup(U){const i=["task","list","pocket","comment","user","location"],w={task:"Tasks",list:"Lists",pocket:"Pockets",comment:"Comments",user:"Users",location:"Locations"},d=v({}),p=async(e,a)=>{var m;const s=u.getTableByEntity(e);if(!s)return;const o=await s.toArray(),n=o.filter(_=>typeof _.id=="string").length;return{total:o.length,unsynced:n,errors:(m=a[e])==null?void 0:m.length}};(async()=>{const e=await u.jobsUpdate.filter(o=>!!o.error).toArray(),a=Object.groupBy(e,o=>o.entity),s=await Promise.all(i.map(o=>p(o,a)));d.value=Object.fromEntries(i.map((o,n)=>[o,s[n]]))})();const b=async()=>{confirm("Are You sure?")&&(k(),await B(),location.reload())};return(e,a)=>(r(),c("div",x,[t("div",null,[a[1]||(a[1]=t("h2",null,"Statistics",-1)),t("div",E,[a[0]||(a[0]=t("div",{class:"tw-w-24"},null,-1)),t("div",A,l(e.$t("Total")),1),t("div",L,l(e.$t("Unsynced")),1),t("div",S,l(e.$t("Error")),1)]),(r(!0),c(g,null,h(d.value,(s,o)=>(r(),c("div",{key:o,class:"flexbox space-12 bordered-bottom"},[t("div",T,l(w[o]),1),t("div",j,l(s==null?void 0:s.total),1),t("div",C,l(s==null?void 0:s.unsynced),1),t("div",F,l(s==null?void 0:s.errors),1)]))),128))]),t("div",null,[a[2]||(a[2]=t("h2",null,"State management",-1)),t("button",{onClick:b}," Reset local state ")])]))}});export{O as default};
