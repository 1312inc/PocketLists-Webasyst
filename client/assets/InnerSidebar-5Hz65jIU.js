import{_ as P,o as m,h as k,I as K,e as $,r as y,w as F,n as N,C as I,k as v,A as B,J as H,z as j,K as L,L as D,y as z,M as J,i as e,t as b,G as T,p as f,j as g,N as O,s as W,O as w,P as A,F as M,Q as G,m as Q}from"./index-Gq4ScTeL.js";import{_ as U}from"./VerticalGap.vue_vue_type_script_setup_true_lang-MiMBPmHg.js";import{m as Y,u as q,_ as X}from"./SortableList.vue_vue_type_style_index_0_lang-n7n6jioc.js";import{u as Z}from"./task-Pk2ebfug.js";const ee={},te={class:"bricks"};function se(u,i){return m(),k("div",te,i[0]||(i[0]=[K('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const ae=P(ee,[["render",se],["__scopeId","data-v-53ea13ed"]]),R=$({__name:"ContenteditableBlock",props:{editable:{type:Boolean},focusable:{type:Boolean},tag:{}},emits:["update","blur"],setup(u,{emit:i}){const o=i,s=u,n=y(),l=y(""),a=r=>{l.value=r.target.innerText},t=r=>{o("blur");const p=r.target.innerText;p!==l.value&&o("update",p)};return F(()=>[s.editable,s.focusable],([r,p])=>{r&&p&&N(()=>{var _;(_=n.value)==null||_.focus(),n.value&&Y(n.value)})}),(r,p)=>(m(),I(H(s.tag),{ref_key:"contenteditableRef",ref:n,contenteditable:s.editable,onFocus:a,onBlur:t},{default:v(()=>[B(r.$slots,"default")]),_:3},40,["contenteditable"]))}}),ne=$({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(u,{emit:i}){const o=i,s=u,n=y(),{draggableEntity:l}=q();return j(()=>{if(n.value){const a=n.value;L(a,"dragenter",t=>{s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&t.currentTarget.classList.add("dragover")}),L(a,"dragleave",t=>{s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&t.target===t.currentTarget&&t.currentTarget.classList.remove("dragover")}),L(a,"dragover",t=>{t.preventDefault()}),L(a,"drop",t=>{if(s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&(t.preventDefault(),t.currentTarget.classList.remove("dragover"),t.dataTransfer))try{const r=JSON.parse(t.dataTransfer.getData("Text")).taskIds;o("drop",r)}catch{}})}}),(a,t)=>(m(),k("div",{ref_key:"menuItemElementRef",ref:n},[B(a.$slots,"default")],512))}}),oe={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},re={class:"hint"},ie={class:"hint"},le={class:"hint"},de={class:"tw-flex tw-gap-4 tw-justify-between"},ce={class:"tw-flex tw-gap-2"},ue=$({__name:"ListsListItem",props:{item:{}},setup(u,{expose:i}){const o=u,s=D(),n=Z(),l=z(),a=y(!1);i({editMode:a});const t=d=>{s.updateItemName(o.item,d)},r=()=>{s.deleteItem(o.item),l.push({name:"lists"})},p=async d=>{await n.sort(o.item.id,null,d)},_=()=>{a.value=!1},x=async()=>{_(),l.push({name:"list",params:{id:o.item.id}})};return(d,c)=>{const V=J("RouterLink");return m(),I(ne,{"draggable-entity-name":"tasks",onDrop:p},{default:v(()=>{var S,h,C,E;return[e("div",oe,[c[5]||(c[5]=e("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[e("i",{class:"fas fa-grip-vertical"})],-1)),e("div",null,[e("div",null,[e("span",re,"id: "+b((S=d.$props.item)==null?void 0:S.id),1),c[1]||(c[1]=T(" | ")),e("span",ie,"prev_id: "+b(String((h=d.$props.item)==null?void 0:h.prev_item_id)),1),c[2]||(c[2]=T(" | ")),e("span",le,"srank: "+b(String((C=d.$props.item)==null?void 0:C.sort))+" | "+b(String((E=f(s).getItemById(d.$props.item.id))==null?void 0:E.rank)),1)]),e("div",de,[g(V,{to:{name:"list",params:{id:d.$props.item.id}}},{default:v(()=>[e("div",{class:O({"tw-bg-yellow":f(l).currentRoute.value.params.id==d.$props.item.id||f(l).currentRoute.value.params.id==d.$props.item.uuid})},[g(R,{editable:a.value,focusable:!0,tag:"span",onBlur:_,onUpdate:t,onKeydown:W(w(x,["prevent"]),["enter"])},{default:v(()=>[T(b(d.item.name),1)]),_:1},8,["editable","onKeydown"])],2)]),_:1},8,["to"]),e("div",ce,[e("a",{class:"count",onClick:c[0]||(c[0]=w(be=>a.value=!a.value,["prevent"]))},c[3]||(c[3]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count",onClick:w(r,["prevent"])},c[4]||(c[4]=[e("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),pe={class:"heading black tw-m-0 tw-mb-2"},me={class:"pl-bg-block"},fe={key:0,class:"tw-px-4 tw-py-3 gray"},ve=$({__name:"ListsList",props:{pocketId:{},title:{}},setup(u){const i=u,o=D(),s=y(!1),n=[],l=async()=>{await o.createList({pocket_id:i.pocketId}),await N(),n.at(-1).editMode=!0};return(a,t)=>(m(),k(M,null,[e("h5",pe,[g(R,{tag:"span",editable:s.value,focusable:!0},{default:v(()=>[T(b(a.title),1)]),_:1},8,["editable"]),e("a",{class:"count",onClick:t[0]||(t[0]=w(r=>s.value=!s.value,["prevent"]))},t[1]||(t[1]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count action",onClick:w(l,["prevent"])},t[2]||(t[2]=[e("i",{class:"fas fa-plus-circle"},null,-1)]))]),e("div",me,[g(X,{items:f(o).getListsInPocket(a.pocketId),"sortable-list-id":a.pocketId,"sortable-group-name":"lists",onSort:f(o).sort},{default:v(({item:r})=>[g(ue,{ref:p=>n.push(p),item:r},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),f(o).getListsInPocket(a.pocketId).length?A("",!0):(m(),k("div",fe," No Lists Yet "))])],64))}}),ge={class:"align-center"},$e=$({__name:"InnerSidebar",setup(u){const i=G();return(o,s)=>(m(),I(U,{space:4},{default:v(()=>[s[2]||(s[2]=e("form",{class:"state-with-inner-icon right tw-w-full"},[e("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),e("button",{class:"icon"},[e("i",{class:"fas fa-search"})])],-1)),g(ae),(m(!0),k(M,null,Q(f(i).pockets,n=>(m(),k("div",{key:n.id},[g(ve,{title:n.name,"pocket-id":n.id},null,8,["title","pocket-id"])]))),128)),e("div",ge,[e("button",{class:"gray",onClick:s[0]||(s[0]=n=>f(i).createPocket())},s[1]||(s[1]=[e("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{$e as default};
