import{I as H,o as c,j as f,N as K,h as w,r as I,G as j,O as k,H as q,P as $,u as z,E as F,Q as O,D as B,v as b,k as t,t as v,L,m as d,q as m,R as U,S as W,z as G,w as _,U as D,F as M,B as J,V as Q,C as Y}from"./index-AerpQI0H.js";import{_ as A}from"./VerticalGap.vue_vue_type_script_setup_true_lang-LbXblN9A.js";import{C as R}from"./ContenteditableBlock-Y9tZmpLh.js";import{u as X,_ as Z}from"./SortableList.vue_vue_type_style_index_0_lang-OJ6gl6_M.js";import"./rangy-5rxgwlWZ.js";const tt={},et={class:"bricks"};function st(u,i){return c(),f("div",et,i[0]||(i[0]=[K('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const at=H(tt,[["render",st],["__scopeId","data-v-53ea13ed"]]),nt=w({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(u,{emit:i}){const s=i,a=u,r=I(),{draggableEntity:l}=X();return j(()=>{if(r.value){const n=r.value;k(n,"dragenter",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.add("dragover")}),k(n,"dragleave",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.target===e.currentTarget&&e.currentTarget.classList.remove("dragover")}),k(n,"dragover",e=>{e.preventDefault()}),k(n,"drop",e=>{if(a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&(e.preventDefault(),e.currentTarget.classList.remove("dragover"),e.dataTransfer))try{const p=JSON.parse(e.dataTransfer.getData("Text")).taskIds;s("drop",p)}catch{}})}}),(n,e)=>(c(),f("div",{ref_key:"menuItemElementRef",ref:r},[q(n.$slots,"default")],512))}}),rt={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},ot={class:"hint"},it={class:"hint"},lt={class:"hint"},dt={class:"tw-flex tw-gap-4 tw-justify-between"},ct={key:0,class:"badge red"},ut={class:"tw-flex tw-gap-2"},pt=w({__name:"ListsListItem",props:{item:{}},setup(u,{expose:i}){const s=u,a=$(),r=z(),l=F(),n=I(!1);i({editMode:n});const e=g=>{a.updateItemName(s.item,g)},p=()=>{a.deleteItem(s.item),l.push({name:"lists"})},y=async g=>{await r.sort(s.item.id,null,g)},S=()=>{n.value=!1},V=async()=>{S(),l.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(g,o)=>{const P=O("RouterLink");return c(),B(nt,{"draggable-entity-name":"tasks",onDrop:y},{default:b(()=>{var T,h,x,E,N,C;return[t("div",rt,[o[5]||(o[5]=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1)),t("div",null,[t("div",null,[t("span",ot,"id: "+v((T=s.item)==null?void 0:T.id),1),o[1]||(o[1]=L(" | ")),t("span",it,"prev_id: "+v(String((h=s.item)==null?void 0:h.prev_item_id)),1),o[2]||(o[2]=L(" | ")),t("span",lt,"srank: "+v(String((x=s.item)==null?void 0:x.sort))+" | "+v(String((E=d(a).getItemById(s.item.id))==null?void 0:E.rank)),1)]),t("div",dt,[m(P,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:b(()=>[t("div",{class:U({"tw-bg-yellow":d(W)(d(l).currentRoute.value.params.id)===s.item.id||d(l).currentRoute.value.params.id===s.item.uuid})},[m(R,{value:g.item.name,editable:n.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:S,onUpdate:e,onKeydown:G(_(V,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),L(" "+v((N=s.item.extended_data)==null?void 0:N.count)+" ",1),(C=s.item.extended_data)!=null&&C.priority_count?(c(),f("div",ct,v(s.item.extended_data.priority_count),1)):D("",!0),t("div",ut,[t("a",{class:"count",onClick:o[0]||(o[0]=_(kt=>n.value=!n.value,["prevent"]))},o[3]||(o[3]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count",onClick:_(p,["prevent"])},o[4]||(o[4]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),mt={class:"heading black tw-m-0 tw-mb-2"},ft={class:"pl-bg-block"},vt={key:0,class:"tw-px-4 tw-py-3 gray"},gt=w({__name:"ListsList",props:{pocketId:{},title:{}},setup(u){const i=u,s=$(),a=I(!1),r=[],l=async()=>{await s.createList({pocket_id:i.pocketId}),await J(),r.at(-1).editMode=!0};return(n,e)=>(c(),f(M,null,[t("h5",mt,[m(R,{value:n.title,tag:"span",editable:a.value,focusable:!0},null,8,["value","editable"]),t("a",{class:"count",onClick:e[0]||(e[0]=_(p=>a.value=!a.value,["prevent"]))},e[1]||(e[1]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count action",onClick:_(l,["prevent"])},e[2]||(e[2]=[t("i",{class:"fas fa-plus-circle"},null,-1)]))]),t("div",ft,[m(Z,{items:d(s).getListsInPocket(n.pocketId),"sortable-list-id":n.pocketId,"sortable-group-name":"lists",onSort:d(s).sort},{default:b(({item:p})=>[m(pt,{ref:y=>r.push(y),item:p},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),d(s).getListsInPocket(n.pocketId).length?D("",!0):(c(),f("div",vt," No Lists Yet "))])],64))}}),_t={class:"align-center"},St=w({__name:"InnerSidebar",setup(u){const i=Q();return(s,a)=>(c(),B(A,{space:4},{default:b(()=>[a[2]||(a[2]=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1)),m(at),(c(!0),f(M,null,Y(d(i).pockets,r=>(c(),f("div",{key:r.uuid||r.id},[m(gt,{title:r.name,"pocket-id":r.id},null,8,["title","pocket-id"])]))),128)),t("div",_t,[t("button",{class:"gray",onClick:a[0]||(a[0]=r=>d(i).createPocket())},a[1]||(a[1]=[t("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{St as default};
