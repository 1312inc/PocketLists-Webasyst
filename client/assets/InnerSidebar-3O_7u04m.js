import{_ as M,o as d,h as v,I as x,e as b,r as g,w as V,n as R,C as w,k as _,A as T,J as P,z as F,K as k,L as E,M as H,i as t,t as m,G as h,p,j as f,N as $,O as j,F as N,P as J,m as O}from"./index-Ni8uggSd.js";import{_ as W}from"./VerticalGap.vue_vue_type_script_setup_true_lang-7qvOTl4A.js";import{u as z}from"./task-3iWWRcpQ.js";import{u as A,_ as G}from"./SortableList.vue_vue_type_style_index_0_lang-qPvhHqOb.js";const K={},U={class:"bricks"},Y=x('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2),q=[Y];function Q(u,o){return d(),v("div",U,q)}const X=M(K,[["render",Q],["__scopeId","data-v-53ea13ed"]]),B=b({__name:"ContenteditableBlock",props:{editable:{type:Boolean},focusable:{type:Boolean},tag:{}},emits:["update","blur"],setup(u,{emit:o}){const i=o,n=u,e=g(),r=g(""),l=s=>{r.value=s.target.innerText},a=s=>{i("blur");const c=s.target.innerText;c!==r.value&&i("update",c)};return V(()=>[n.editable,n.focusable],([s,c])=>{s&&c&&e.value&&R(()=>{e.value.focus()})}),(s,c)=>(d(),w(P(n.tag),{ref_key:"contenteditableRef",ref:e,contenteditable:n.editable,onFocus:l,onBlur:a},{default:_(()=>[T(s.$slots,"default")]),_:3},40,["contenteditable"]))}}),Z=b({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(u,{emit:o}){const i=o,n=u,e=g(),{draggableEntity:r}=A();return F(()=>{if(e.value){const l=e.value;k(l,"dragenter",a=>{n.draggableEntityName===r.value&&a.currentTarget instanceof HTMLElement&&a.currentTarget.classList.add("dragover")}),k(l,"dragleave",a=>{n.draggableEntityName===r.value&&a.currentTarget instanceof HTMLElement&&a.target===a.currentTarget&&a.currentTarget.classList.remove("dragover")}),k(l,"dragover",a=>{a.preventDefault()}),k(l,"drop",a=>{if(n.draggableEntityName===r.value&&a.currentTarget instanceof HTMLElement&&(a.preventDefault(),a.currentTarget.classList.remove("dragover"),a.dataTransfer))try{const s=JSON.parse(a.dataTransfer.getData("Text")).taskIds;i("drop",s)}catch{}})}}),(l,a)=>(d(),v("div",{ref_key:"menuItemElementRef",ref:e},[T(l.$slots,"default")],512))}}),tt={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},et=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1),st={class:"hint"},at={class:"hint"},nt={class:"hint"},ot={class:"tw-flex tw-gap-4 tw-justify-between"},it={class:"tw-flex tw-gap-2"},rt=t("i",{class:"fas fa-pen"},null,-1),lt=[rt],ct=t("i",{class:"fas fa-trash-alt"},null,-1),dt=[ct],ut=b({__name:"ListsListItem",props:{item:{}},setup(u){const o=u,i=E(),n=z(),e=g(!1),r=s=>{i.updateItemName(o.item,s)},l=()=>{i.deleteItem(o.item)},a=async s=>{await n.sort(o.item.id,null,s)};return(s,c)=>{const C=H("RouterLink");return d(),w(Z,{"draggable-entity-name":"tasks",onDrop:a},{default:_(()=>{var y,L,I,S;return[t("div",tt,[et,t("div",null,[t("div",null,[t("span",st,"id: "+m((y=s.$props.item)==null?void 0:y.id),1),h(" | "),t("span",at,"prev_id: "+m(String((L=s.$props.item)==null?void 0:L.prev_item_id)),1),h(" | "),t("span",nt,"srank: "+m(String((I=s.$props.item)==null?void 0:I.sort))+" | "+m(String((S=p(i).getItemById(s.$props.item.id))==null?void 0:S.rank)),1)]),t("div",ot,[f(C,{to:{name:"list",params:{id:s.$props.item.id}}},{default:_(()=>[t("div",null,[f(B,{editable:e.value,focusable:!0,tag:"span",onBlur:c[0]||(c[0]=D=>e.value=!1),onUpdate:r},{default:_(()=>[h(m(s.item.name),1)]),_:1},8,["editable"])])]),_:1},8,["to"]),t("div",it,[t("a",{class:"count",onClick:c[1]||(c[1]=$(D=>e.value=!e.value,["prevent"]))},lt),t("a",{class:"count",onClick:$(l,["prevent"])},dt)])])])])]}),_:1})}}}),pt={class:"heading black tw-m-0 tw-mb-2"},_t=t("i",{class:"fas fa-pen"},null,-1),ft=[_t],mt=t("i",{class:"fas fa-plus-circle"},null,-1),vt=[mt],gt={class:"pl-bg-block"},bt={key:0,class:"tw-px-4 tw-py-3 gray"},kt=b({__name:"ListsList",props:{pocketId:{},title:{}},setup(u){const o=E(),i=g(!1);return(n,e)=>(d(),v(N,null,[t("h5",pt,[f(B,{tag:"span",editable:i.value,focusable:!0},{default:_(()=>[h(m(n.title),1)]),_:1},8,["editable"]),t("a",{class:"count",onClick:e[0]||(e[0]=$(r=>i.value=!i.value,["prevent"]))},ft),t("a",{class:"count action",onClick:e[1]||(e[1]=$(r=>p(o).createList({pocket_id:n.pocketId}),["prevent"]))},vt)]),t("div",gt,[f(G,{items:p(o).getListsInPocket(n.pocketId),"sortable-list-id":n.pocketId,"sortable-group-name":"lists",onSort:p(o).sort},{default:_(({item:r})=>[f(ut,{item:r},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),p(o).getListsInPocket(n.pocketId).length?j("",!0):(d(),v("div",bt," No Lists Yet "))])],64))}}),ht=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1),$t={class:"align-center"},wt=t("i",{class:"fa fa-plus"},null,-1),yt=[wt],Et=b({__name:"InnerSidebar",setup(u){const o=J();return(i,n)=>(d(),w(W,{space:4},{default:_(()=>[ht,f(X),(d(!0),v(N,null,O(p(o).pockets,e=>(d(),v("div",{key:e.id},[f(kt,{title:e.name,"pocket-id":e.id},null,8,["title","pocket-id"])]))),128)),t("div",$t,[t("button",{class:"gray",onClick:n[0]||(n[0]=e=>p(o).createPocket())},yt)])]),_:1}))}});export{Et as default};
