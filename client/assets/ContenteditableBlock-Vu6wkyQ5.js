import{m as g,s as h}from"./sanitizer-qTkizPqY.js";import{d as B,r as i,m as T,o as l,e as k,z as u,j as y,Y as d,t as w,g as D,_ as V}from"./index-UuSlGmgb.js";const z={class:"tw-relative tw-w-full"},E=B({__name:"ContenteditableBlock",props:{value:{},editable:{type:Boolean},focusable:{type:Boolean},placeholder:{},tag:{}},emits:["update","blur"],setup(p,{expose:m,emit:f}){const s=f,t=p;m({focus:x});const n=i(),o=i(!1);let r="";const v=e=>{r=e.target.innerText},b=e=>{const a=e.target.innerText.trim();s("update",a!==r?a:null),s("blur")},_=e=>{o.value=!e.target.innerText};T(()=>t.value,e=>{o.value=!e},{immediate:!0});async function x(){if(t.editable&&t.focusable){if(!n.value)return;n.value.focus(),g(n.value)}}const C=e=>{var c;e.preventDefault();const a=(c=e.clipboardData)==null?void 0:c.getData("text/plain");a&&document.execCommand("insertText",!1,a)};return(e,a)=>(l(),k("div",z,[(l(),u(d(t.tag),{ref_key:"contenteditableRef",ref:n,contenteditable:t.editable,onFocus:v,onBlur:b,onInput:_,onPaste:C,innerHTML:y(h)(t.value)},null,40,["contenteditable","innerHTML"])),o.value?(l(),u(d(t.tag),{key:0,class:"placeholder",textContent:w(t.placeholder)},null,8,["textContent"])):D("",!0)]))}}),L=V(E,[["__scopeId","data-v-4197634a"]]);export{L as C};
