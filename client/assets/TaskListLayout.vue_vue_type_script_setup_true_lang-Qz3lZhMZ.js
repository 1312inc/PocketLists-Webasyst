import{d as I,j as m,o as e,c as o,b as s,t as a,F as v,m as A,C as g,B as N,u as U,Q as F,w as f,e as C,g as h,H as V,W as R,D as P,N as L,f as S,_ as z,G as W,R as j,O as B,x as k,a7 as E}from"./index-PpPTOWQK.js";const G={class:"hint custom-mb-4"},H={class:"pl-usersIcons"},M=["title"],O={key:0,class:"pl-usersIcons-more smaller"},y=5,Q=I({__name:"UsersAvatars",props:{users:{}},setup(r){const t=m(()=>r.users.length>y?r.users.slice(r.users.length-y):r.users),c=m(()=>r.users.length-y);return(u,l)=>(e(),o(v,null,[s("p",G,a(u.$t("Access")),1),s("div",H,[(e(!0),o(v,null,A(t.value,_=>(e(),o("i",{key:_.id,class:"userpic userpic-32",style:N(`background-image: url('${_.photo_url}')`),title:_.name},null,12,M))),128)),c.value>0?(e(),o("div",O,a(`+${c.value}`),1)):g("",!0)])],64))}}),q={class:"custom-p-12"},J={class:"lg:tw-hidden"},K={class:"custom-mb-12"},X={key:0,class:"custom-mb-12"},Y={class:"hint custom-mb-4"},Z={class:"custom-ml-4"},x={key:0,class:"hint custom-ml-4 tw-whitespace-nowrap"},ss={key:1,class:"custom-mb-12"},es={class:"hint custom-mb-4"},ts=["onClick"],as={class:"icon"},ns=["src"],os={class:"menu"},is=["onClick"],ls=["onClick"],rs={class:"icon"},cs=["src"],us={class:"menu"},ds={class:"rounded top-padded"},ms={href:"#"},_s={class:"rounded"},ps={href:"WA_APP_URL/lists/?module=list&id=N&print=true",target:"_blank"},hs={class:"rounded"},vs={href:"#"},fs={class:"rounded top-padded"},gs={href:"#"},$s={class:"rounded"},ws=I({__name:"RightSidebarList",props:{listId:{}},setup(r){const t=r,c=U(),u=F(),l=m(()=>u.getItemById(t.listId)),_=m(()=>c.getItemsByIdsAsync(l.value.extended_data.users)),$=m(()=>l.value.contact_id&&c.getItemById(l.value.contact_id)),w=m(()=>l.value.assigned_contact_id&&c.getItemById(l.value.assigned_contact_id)),T=async()=>{await u.deleteItem(l.value.id)},b=async i=>{await u.updateItem(l.value.id,{assigned_contact_id:i})};return(i,n)=>(e(),o("div",q,[s("div",J,[s("a",{class:"back larger",onClick:n[0]||(n[0]=f(p=>i.$router.push("../"),["prevent"]))},n[1]||(n[1]=[s("i",{class:"fas fa-arrow-circle-left"},null,-1)]))]),s("div",K,[C(Q,{users:_.value},null,8,["users"])]),$.value?(e(),o("div",X,[s("div",Y,a(i.$t("Created by")),1),s("div",null,[s("span",{class:"icon userpic userpic-20",style:N({backgroundImage:`url(${$.value.photo_url})`})},null,4),s("span",Z,a($.value.name),1),l.value.create_datetime?(e(),o("span",x,a(h(P)(l.value.create_datetime)),1)):g("",!0)])])):g("",!0),h(L).user_rights.canassign||h(L).user_rights.backend==="FULL"?(e(),o("div",ss,[s("p",es,a(i.$t("Assigned to")),1),C(R,null,{default:V(({handler:p,setRef:d})=>[s("button",{ref:D=>d(D),class:"outlined",onClick:p},[w.value?(e(),o(v,{key:0},[s("span",as,[s("img",{src:w.value.photo_url,class:"userpic"},null,8,ns)]),S(" "+a(w.value.name),1)],64)):(e(),o(v,{key:1},[S(a(i.$t("Select user")),1)],64))],8,ts)]),body:V(({handler:p})=>[s("ul",os,[s("li",null,[s("a",{onClick:f(()=>{b(null),p()},["prevent"])},a(i.$t("No assignment")),9,is)]),(e(!0),o(v,null,A(h(c).items,d=>(e(),o("li",{key:d.id,class:"item"},[s("a",{onClick:f(()=>{b(d.id),p()},["prevent"])},[s("span",rs,[s("img",{src:d.photo_url,class:"userpic"},null,8,cs)]),s("span",null,a(d.name),1)],8,ls)]))),128))])]),_:1})])):g("",!0),s("ul",us,[s("li",ds,[s("a",ms,[n[2]||(n[2]=s("span",{class:"icon"},[s("i",{class:"fas fa-edit"})],-1)),s("span",null,a(i.$t("Icon & color")),1)])]),s("li",_s,[s("a",ps,[n[3]||(n[3]=s("span",{class:"icon"},[s("i",{class:"fas fa-print"})],-1)),s("span",null,a(i.$t("Print list")),1)])]),s("li",hs,[s("a",vs,[n[4]||(n[4]=s("span",{class:"icon"},[s("i",{class:"fas fa-envelope"})],-1)),s("span",null,a(i.$t("Email list")),1)])]),s("li",fs,[s("a",gs,[n[5]||(n[5]=s("span",{class:"icon"},[s("i",{class:"fas fa-archive"})],-1)),s("span",null,a(i.$t("Archive list")),1)])]),s("li",$s,[s("a",{onClick:f(T,["prevent"])},[n[6]||(n[6]=s("span",{class:"icon"},[s("i",{class:"fas fa-trash-alt"})],-1)),s("span",null,a(i.$t("Delete list")),1)])])])]))}}),ks={},ys={class:"custom-p-24"};function Is(r,t){return e(),o("div",ys)}const bs=z(ks,[["render",Is]]),Cs={class:"flexbox justify-center"},Ls=I({__name:"TaskListLayout",setup(r){return(t,c)=>{const u=W("router-view");return e(),o("div",Cs,[s("div",{class:B(["tw-flex-auto custom-m-12 lg:tw-max-w[600px]",{"lt-lg:tw-hidden":t.$route.meta.isTaskInfoView||t.$route.meta.isListInfoView}])},[j(t.$slots,"default")],2),s("aside",{class:B(["sidebar right tw-flex-none lt-lg:tw-w-full xl:tw-w-90 empty:tw-hidden",{"lt-lg:tw-hidden":t.$route.meta.isListView&&!t.$route.meta.isTaskInfoView&&!t.$route.meta.isListInfoView}])},[t.$route.meta.isFilterView&&!t.$route.meta.isTaskInfoView?(e(),k(bs,{key:0})):t.$route.meta.isListView&&!t.$route.meta.isTaskInfoView?(e(),k(ws,{key:1,"list-id":h(E)(t.$route.params.listId)},null,8,["list-id"])):(e(),k(u,{key:2}))],2)])}}});export{Ls as _};
