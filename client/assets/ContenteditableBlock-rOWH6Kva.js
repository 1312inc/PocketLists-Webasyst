import{m as g,s as y}from"./sanitizer-TiisBOmJ.js";import{d as B,r as i,m as T,o as l,e as h,y as u,j as k,Z as d,t as w,g as D,n as V,_ as z}from"./index-kcpnesMQ.js";const E=B({__name:"ContenteditableBlock",props:{value:{},editable:{type:Boolean},focusable:{type:Boolean},placeholder:{},tag:{}},emits:["update","blur"],setup(p,{expose:m,emit:f}){const s=f,t=p;m({focus:_});const n=i(),o=i(!1);let r="";const v=e=>{r=e.target.innerText},b=e=>{const a=e.target.innerText.trim();s("update",a!==r?a:null),s("blur")},x=e=>{o.value=!e.target.innerText};T(()=>t.value,e=>{o.value=!e},{immediate:!0});async function _(){if(t.editable&&t.focusable){if(!n.value)return;n.value.focus(),g(n.value)}}const C=e=>{var c;e.preventDefault();const a=(c=e.clipboardData)==null?void 0:c.getData("text/plain");a&&document.execCommand("insertText",!1,a)};return(e,a)=>(l(),h("div",{class:V(["tw-relative",{"tw-w-full":o.value}])},[(l(),u(d(t.tag),{ref_key:"contenteditableRef",ref:n,contenteditable:t.editable,onFocus:v,onBlur:b,onInput:x,onPaste:C,innerHTML:k(y)(t.value)},null,40,["contenteditable","innerHTML"])),o.value?(l(),u(d(t.tag),{key:0,class:"placeholder",textContent:w(t.placeholder)},null,8,["textContent"])):D("",!0)],2))}}),L=z(E,[["__scopeId","data-v-474d13db"]]);export{L as C};
