import{d as b,A as C,a4 as I,a5 as $,c as V,o as a,e as n,f as t,i as d,I as B,t as u,F as w,y as M,j as v,h as y,z as c,Y as N,q,a6 as A,g as R,a7 as S,a8 as z}from"./index-xfGaqx-Z.js";import{_ as k}from"./TaskList.vue_vue_type_script_setup_true_lang-kUno_k9H.js";import{c as D}from"./textToHtmlWithLinks-3UkV-hMM.js";import"./sanitizer-qTkizPqY.js";import"./SortableList.vue_vue_type_style_index_0_lang-zCNn8rIW.js";const E={class:"pl-map-sidebar"},T={key:0,class:"tw-flex tw-flex-col tw-gap-4 tw-h-full"},j={class:"hide-scrollbar tw-flex-auto tw-overflow-y-auto"},F={class:"menu large"},P=["onClick"],Y={key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-h-full"},O={class:"tw-flex-none tw-flex tw-items-center tw-gap-4 tw-justify-between"},G={class:"bold"},H={class:"hide-scrollbar tw-flex-auto tw-overflow-y-auto"},X=b({__name:"MapView",props:{locationId:{}},setup(p){const i=C(),r=I(),_=S(()=>z(()=>import("./MapYandex-zKmImN3R.js"),__vite__mapDeps([0,1,2]),import.meta.url)),g=$(_),s=V(()=>p.locationId&&r.getItemById(p.locationId)),m=o=>{i.push(`/map/${o}`)},h=()=>{const o={...i.currentRoute.value.query};o.addLocation?delete o.addLocation:o.addLocation="1",i.push({path:"/map",query:o})},x=async o=>{await r.deleteItem(o),i.push("/map")};return(o,e)=>(a(),n(w,null,[t("div",E,[s.value?(a(),n("div",Y,[t("div",O,[t("a",{class:"back larger",onClick:e[0]||(e[0]=d(l=>o.$router.push("/map"),["prevent"]))},e[4]||(e[4]=[t("i",{class:"fas fa-arrow-circle-left"},null,-1)])),t("div",G,u(s.value.name),1),t("div",null,[t("a",{onClick:e[1]||(e[1]=d(l=>x(s.value),["prevent"]))},e[5]||(e[5]=[t("i",{class:"fas fa-trash-alt text-light-gray"},null,-1)]))])]),t("div",H,[y(k,{filter:"location","location-id":s.value.id,"addable-props":{location_id:s.value.id}},null,8,["location-id","addable-props"]),e[6]||(e[6]=t("div",{class:"custom-px-24 custom-my-24 tw-cursor-pointer"}," Выполненные ",-1)),y(k,{filter:"location","location-id":s.value.id,"should-filter-uncompleted":!0,"hide-add-new-task":!0},null,8,["location-id"])])])):(a(),n("div",T,[t("a",{class:"button",onClick:d(h,["prevent"])},[e[2]||(e[2]=t("i",{class:"fas fa-map-marker-alt custom-mr-4"},null,-1)),B(" "+u(o.$t("New location")),1)]),t("div",j,[t("ul",F,[(a(!0),n(w,null,M(v(r).items,l=>(a(),n("li",{key:l.id,class:"rounded"},[t("a",{onClick:d(f=>m(l.id),["prevent"])},[e[3]||(e[3]=t("i",{class:"fas fa-map-marker-alt custom-mr-4"},null,-1)),t("span",null,u(l.name),1)],8,P)]))),128))])])]))]),(a(),c(A,{to:"#wa-app"},[(a(),c(N(g.value),{places:v(r).items,"selected-location-id":o.locationId,onSelectLocation:m},{default:q(({lng:l,lat:f,zoom:L})=>[o.$route.query.addLocation?(a(),c(D,{key:0,lng:l,lat:f,zoom:L},null,8,["lng","lat","zoom"])):R("",!0),e[7]||(e[7]=t("div",{id:"map",class:"tw-absolute tw-w-full tw-h-1/2 md:tw-h-full tw-top-0 tw-left-0 z-0"},null,-1))]),_:1},40,["places","selected-location-id"]))]))],64))}});export{X as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./MapYandex-zKmImN3R.js","./index-xfGaqx-Z.js","./index-7536kXta.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
