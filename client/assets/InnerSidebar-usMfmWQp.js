import{_ as K,o as c,c as u,G as P,d as w,r as S,z as q,H as k,A as z,I as B,i as F,y as J,J as O,x as D,l as b,b as t,e as d,K as W,t as v,D as L,L as I,h as f,M as j,N as A,n as G,w as _,F as M,q as U,O as Y,s as Q}from"./index-ggCixsQ6.js";import{_ as X}from"./VerticalGap.vue_vue_type_script_setup_true_lang-CVF0p1sk.js";import{C as R}from"./ContenteditableBlock-CBnKP8H2.js";import{u as Z,_ as tt}from"./SortableList.vue_vue_type_style_index_0_lang-J1WeAD9R.js";import"./rangy-5rxgwlWZ.js";const et={},st={class:"bricks"};function at(p,i){return c(),u("div",st,i[0]||(i[0]=[P('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const nt=K(et,[["render",at],["__scopeId","data-v-53ea13ed"]]),ot=w({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(p,{emit:i}){const s=i,a=p,o=S(),{draggableEntity:l}=Z();return q(()=>{if(o.value){const n=o.value;k(n,"dragenter",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.add("dragover")}),k(n,"dragleave",e=>{a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&e.target===e.currentTarget&&e.currentTarget.classList.remove("dragover")}),k(n,"dragover",e=>{e.preventDefault()}),k(n,"drop",e=>{if(a.draggableEntityName===l.value&&e.currentTarget instanceof HTMLElement&&(e.preventDefault(),e.currentTarget.classList.remove("dragover"),e.dataTransfer))try{const m=JSON.parse(e.dataTransfer.getData("Text")).taskIds;s("drop",m)}catch{}})}}),(n,e)=>(c(),u("div",{ref_key:"menuItemElementRef",ref:o},[z(n.$slots,"default")],512))}}),rt={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},it={key:0},lt={class:"hint"},dt={class:"hint"},ct={class:"hint"},ut={class:"tw-flex tw-gap-4 tw-justify-between"},pt={key:0,class:"badge red"},mt={class:"tw-flex tw-gap-2"},ft=w({__name:"ListsListItem",props:{item:{}},setup(p,{expose:i}){const s=p,a=B(),o=F(),l=J(),n=S(!1);i({editMode:n});const e=g=>{a.updateItemName(s.item,g)},m=()=>{a.deleteItem(s.item),l.push({name:"lists"})},y=async g=>{await o.sort(s.item.id,null,g)},T=()=>{n.value=!1},V=async()=>{T(),l.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(g,r)=>{const H=O("RouterLink");return c(),D(ot,{"draggable-entity-name":"tasks",onDrop:y},{default:b(()=>{var h,x,N,E,$,C;return[t("div",rt,[r[5]||(r[5]=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1)),t("div",null,[d(W).is_debug_mode?(c(),u("div",it,[t("span",lt,"id: "+v((h=s.item)==null?void 0:h.id),1),r[1]||(r[1]=L(" | ")),t("span",dt,"prev_id: "+v(String((x=s.item)==null?void 0:x.prev_item_id)),1),r[2]||(r[2]=L(" | ")),t("span",ct,"srank: "+v(String((N=s.item)==null?void 0:N.sort))+" | "+v(String((E=d(a).getItemById(s.item.id))==null?void 0:E.rank)),1)])):I("",!0),t("div",ut,[f(H,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:b(()=>[t("div",{class:j({"tw-bg-yellow":d(A)(d(l).currentRoute.value.params.id)===s.item.id||d(l).currentRoute.value.params.id===s.item.uuid})},[f(R,{value:g.item.name,editable:n.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:T,onUpdate:e,onKeydown:G(_(V,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),L(" "+v(($=s.item.extended_data)==null?void 0:$.count)+" ",1),(C=s.item.extended_data)!=null&&C.priority_count?(c(),u("div",pt,v(s.item.extended_data.priority_count),1)):I("",!0),t("div",mt,[t("a",{class:"count",onClick:r[0]||(r[0]=_(wt=>n.value=!n.value,["prevent"]))},r[3]||(r[3]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count",onClick:_(m,["prevent"])},r[4]||(r[4]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),vt={class:"heading black tw-m-0 tw-mb-2"},gt={class:"pl-bg-block"},_t={key:0,class:"tw-px-4 tw-py-3 gray"},kt=w({__name:"ListsList",props:{pocketId:{},title:{}},setup(p){const i=p,s=B(),a=S(!1),o=[],l=async()=>{await s.createList({pocket_id:i.pocketId}),await U(),o.at(-1).editMode=!0};return(n,e)=>(c(),u(M,null,[t("h5",vt,[f(R,{value:n.title,tag:"span",editable:a.value,focusable:!0},null,8,["value","editable"]),t("a",{class:"count",onClick:e[0]||(e[0]=_(m=>a.value=!a.value,["prevent"]))},e[1]||(e[1]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count action",onClick:_(l,["prevent"])},e[2]||(e[2]=[t("i",{class:"fas fa-plus-circle"},null,-1)]))]),t("div",gt,[f(tt,{items:d(s).getListsInPocket(n.pocketId),"sortable-list-id":n.pocketId,"sortable-group-name":"lists",onSort:d(s).sort},{default:b(({item:m})=>[f(ft,{ref:y=>o.push(y),item:m},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),d(s).getListsInPocket(n.pocketId).length?I("",!0):(c(),u("div",_t," No Lists Yet "))])],64))}}),bt={class:"align-center"},ht=w({__name:"InnerSidebar",setup(p){const i=Y();return(s,a)=>(c(),D(X,{space:4},{default:b(()=>[a[2]||(a[2]=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1)),f(nt),(c(!0),u(M,null,Q(d(i).pockets,o=>(c(),u("div",{key:o.uuid||o.id},[f(kt,{title:o.name,"pocket-id":o.id},null,8,["title","pocket-id"])]))),128)),t("div",bt,[t("button",{class:"gray",onClick:a[0]||(a[0]=o=>d(i).createPocket())},a[1]||(a[1]=[t("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{ht as default};
