import{d as f,r as v,o as r,b as i,e as s,H as u,t as e,F as _,y as B,as as g,aM as k,aN as $}from"./index-ux3jP22C.js";const T={class:"box contentbox"},E={class:"small"},A={class:"small"},L={class:"flexbox small space-12 bordered-bottom"},M={class:"tw-w-24 align-right bold"},j={class:"tw-w-24 align-right"},C={class:"tw-w-24 align-right"},D={class:"tw-w-24"},N={class:"tw-w-24 align-right bold"},S={class:"tw-w-24 align-right"},U={class:"tw-w-24 align-right"},V={class:"custom-mt-24"},x={class:"hint"},O=f({__name:"BetaView",setup(y){const c=["task","list","pocket","comment","user","location"],b={task:"Tasks",list:"Lists",pocket:"Pockets",comment:"Comments",user:"Users",location:"Locations"},d=v({}),p=async(a,t)=>{var m;const o=g.getTableByEntity(a);if(!o)return;const l=await o.toArray(),n=l.filter(h=>typeof h.id=="string").length;return{total:l.length,unsynced:n,errors:(m=t[a])==null?void 0:m.length}};(async()=>{const a=await g.jobsUpdate.filter(l=>!!l.error).toArray(),t=Object.groupBy(a,l=>l.entity),o=await Promise.all(c.map(l=>p(l,t)));d.value=Object.fromEntries(c.map((l,n)=>[l,o[n]]))})();const w=async()=>{confirm("Are You sure?")&&(k(),await $(),location.reload())};return(a,t)=>(r(),i("div",T,[s("div",null,[s("h2",null,[u(e(a.$t("betaTitle"))+" ",1),t[0]||(t[0]=s("span",{class:"hint"},"Beta",-1))]),s("p",E,e(a.$t("betaWelcomeMsg")),1),t[2]||(t[2]=s("p",null," Создаем лучший чек-лист-менеджер для бизнеса, и он будет внутри вашего Вебасиста. Новый ПЛ на новый рельсах. Быстрее в 100 раз. АПИ, мобильные приложения скоро. Новое — календарь, повтор, карта, назначение списков и т.д. пишем про новые бесплатные фичи Новый премиум для поддержки развития проекта. Смотрите премиум-фичи в отдельном разделе. ",-1)),t[3]||(t[3]=s("p",{class:"small"},[s("a",{href:"mailto:hello@1312.io",class:"button light-gray text-blue"},[s("i",{class:"fas fa-envelope custom-mr-4"}),u(" hello@1312.io")])],-1)),t[4]||(t[4]=s("hr",null,null,-1)),s("p",A,e(a.$t("localDbStateMsg")),1),s("div",L,[t[1]||(t[1]=s("div",{class:"tw-w-24"},null,-1)),s("div",M,e(a.$t("Total")),1),s("div",j,e(a.$t("Unsynced")),1),s("div",C,e(a.$t("Error")),1)]),(r(!0),i(_,null,B(d.value,(o,l)=>(r(),i("div",{key:l,class:"flexbox small space-12 bordered-bottom"},[s("div",D,e(b[l]),1),s("div",N,e(o==null?void 0:o.total),1),s("div",S,e(o==null?void 0:o.unsynced),1),s("div",U,e(o==null?void 0:o.errors),1)]))),128))]),s("div",V,[s("button",{onClick:w,class:"warning smaller"},e(a.$t("betaResetBtn")),1),s("p",x,e(a.$t("betaResetBtnHint")),1)])]))}});export{O as default};
