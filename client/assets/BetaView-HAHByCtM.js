import{d as _,r as f,o as r,c as i,b as s,f as u,t as l,F as v,m as B,as as g,aI as k,aJ as $}from"./index-UBRhw1rw.js";const A={class:"box contentbox"},E={class:"small"},L={class:"small"},T={class:"flexbox small space-12 bordered-bottom"},P={class:"tw-w-24 align-right bold"},j={class:"tw-w-24 align-right"},x={class:"tw-w-24 align-right"},C={class:"tw-w-24"},D={class:"tw-w-24 align-right bold"},M={class:"tw-w-24 align-right"},S={class:"tw-w-24 align-right"},U={class:"custom-mt-24"},V={class:"hint"},N=_({__name:"BetaView",setup(W){const c=["task","list","pocket","comment","user","location"],b={task:"Tasks",list:"Lists",pocket:"Pockets",comment:"Comments",user:"Users",location:"Locations"},d=f({}),p=async(a,e)=>{var m;const t=g.getTableByEntity(a);if(!t)return;const o=await t.toArray(),n=o.filter(w=>typeof w.id=="string").length;return{total:o.length,unsynced:n,errors:(m=e[a])==null?void 0:m.length}};(async()=>{const a=await g.jobsUpdate.filter(o=>!!o.error).toArray(),e=Object.groupBy(a,o=>o.entity),t=await Promise.all(c.map(o=>p(o,e)));d.value=Object.fromEntries(c.map((o,n)=>[o,t[n]]))})();const h=async()=>{confirm("Are You sure?")&&(k(),await $(),location.reload())};return(a,e)=>(r(),i("div",A,[s("div",null,[e[1]||(e[1]=s("h2",null,[u("Beta "),s("span",{class:"hint"},"Pocket Lists Webasyst PWA")],-1)),s("p",E,l(a.$t("betaWelcomeMsg")),1),e[2]||(e[2]=s("p",{class:"small"},[s("a",{href:"mailto:hello@1312.io",class:"button light-gray text-blue"},[s("i",{class:"fas fa-envelope custom-mr-4"}),u(" hello@1312.io")])],-1)),e[3]||(e[3]=s("hr",null,null,-1)),s("p",L,l(a.$t("localDbStateMsg")),1),s("div",T,[e[0]||(e[0]=s("div",{class:"tw-w-24"},null,-1)),s("div",P,l(a.$t("Total")),1),s("div",j,l(a.$t("Unsynced")),1),s("div",x,l(a.$t("Error")),1)]),(r(!0),i(v,null,B(d.value,(t,o)=>(r(),i("div",{key:o,class:"flexbox small space-12 bordered-bottom"},[s("div",C,l(b[o]),1),s("div",D,l(t==null?void 0:t.total),1),s("div",M,l(t==null?void 0:t.unsynced),1),s("div",S,l(t==null?void 0:t.errors),1)]))),128))]),s("div",U,[s("button",{onClick:h,class:"warning smaller"},l(a.$t("betaResetBtn")),1),s("p",V,l(a.$t("betaResetBtnHint")),1)])]))}});export{N as default};
