import{m as k,s as h}from"./sanitizer-TiisBOmJ.js";import{d as y,r as u,m as B,o as l,e as T,y as d,j as w,Z as p,t as D,g as P,n as V,_ as z}from"./index-V0gsrDTQ.js";const E=y({__name:"ContenteditableBlock",props:{value:{},editable:{type:Boolean},focusable:{type:Boolean},placeholder:{},tag:{}},emits:["update","blur"],setup(f,{expose:m,emit:v}){const s=v,t=f;m({focus:c});const n=u(),o=u(!1);let r="";const b=e=>{r=e.target.innerText},x=e=>{const a=e.target.innerText.trim();s("update",a!==r?a:null),s("blur")},C=e=>{o.value=!e.target.innerText};B(()=>t.value,e=>{o.value=!e},{immediate:!0});async function c(){if(t.editable&&t.focusable){if(!n.value)return;n.value.focus(),k(n.value)}}const _=e=>{var i;e.preventDefault();const a=(i=e.clipboardData)==null?void 0:i.getData("text/plain");a&&document.execCommand("insertText",!1,a)},g=()=>{t.value||c()};return(e,a)=>(l(),T("div",{class:V(["tw-relative",{"tw-w-full":o.value}]),onClick:g},[(l(),d(p(t.tag),{ref_key:"contenteditableRef",ref:n,contenteditable:t.editable,onFocus:b,onBlur:x,onInput:C,onPaste:_,innerHTML:w(h)(t.value)},null,40,["contenteditable","innerHTML"])),o.value?(l(),d(p(t.tag),{key:0,class:"placeholder",textContent:D(t.placeholder)},null,8,["textContent"])):P("",!0)],2))}}),L=z(E,[["__scopeId","data-v-e9150fd3"]]);export{L as C};
