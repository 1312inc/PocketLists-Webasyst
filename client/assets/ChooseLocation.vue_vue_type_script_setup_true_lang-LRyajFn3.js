import{aw as $,d as j,ac as w,a7 as A,r as p,a6 as B,k as y,aA as E,o as r,c as d,b as t,h as N,l as C,m as _,v as h,F as L,s as M,w as b,B as z,t as n,ad as G,e as I}from"./index-BeA8Rzwh.js";const O=async o=>{try{const{response:s}=await(await fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=${$}&geocode=${o}&format=json`)).json();return s?s.GeoObjectCollection.featureMember.map(f=>f.GeoObject):[]}catch(s){return s instanceof Error&&console.error(s.message),[]}},T={class:"tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full"},U={class:"tw-absolute tw-flex tw-flex-col tw-gap-2 tw-top-12 tw-right-2 tw-z-50"},Y={class:"pl-bg-block tw-p-4 tw-rounded-md"},P={class:"menu"},W=["onClick"],K={class:"gray small"},X={class:"pl-bg-block tw-p-4 tw-rounded-md"},q={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},H={class:"tw-flex-auto"},J={class:"pl-bg-block tw-p-4 tw-rounded-md"},Q={class:"menu"},Z=["onClick"],et=j({__name:"ChooseLocation",props:{lng:{},lngModifiers:{},lat:{},latModifiers:{},radius:{},radiusModifiers:{},radiusSliderRange:{},radiusSliderRangeModifiers:{}},emits:["update:lng","update:lat","update:radius","update:radiusSliderRange"],setup(o){const s=w(o,"lng"),f=w(o,"lat"),k=w(o,"radius"),m=w(o,"radiusSliderRange"),S=A(),i=p(""),c=p(!1),v=p(!1),g=B([]),x=p();y(g,({length:a})=>{c.value=!!a}),y(E(i,500),a=>{if(v.value){v.value=!1;return}R(a)});const R=async a=>{g.value=await O(a)},V=a=>{x.value=a,c.value=!1,v.value=!0,i.value=a.name},D=()=>{v.value=!0,i.value=""},F=a=>{x.value={lat:a.location_latitude,lng:a.location_longitude,radius:a.location_radius}};return(a,e)=>(r(),d("div",T,[t("div",U,[t("div",Y,[N(G,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l)},{default:C(({setRef:l})=>[_(t("input",{ref:u=>l(u),"onUpdate:modelValue":e[0]||(e[0]=u=>i.value=u),type:"text",class:"tw-w-full",placeholder:"Input location"},null,512),[[h,i.value]])]),body:C(()=>[t("ul",P,[(r(!0),d(L,null,M(g.value,l=>(r(),d("li",{key:l.uri},[t("a",{onClick:b(u=>V(l),["prevent"])},[t("div",null,[z(n(l.name),1),e[4]||(e[4]=t("br",null,null,-1)),t("span",K,n(l.description),1)])],8,W)]))),128))])]),_:1},8,["modelValue"])]),t("div",X,[e[7]||(e[7]=t("h6",null," Current locations ",-1)),t("div",null,"Lat: "+n(f.value),1),t("div",null,"Lng: "+n(s.value),1),t("div",null,"Radius: "+n(k.value&&Math.ceil(k.value))+" m",1),t("div",q,[t("div",H,[_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),type:"range",min:"10",max:"100",class:"tw-w-full"},null,512),[[h,m.value,void 0,{number:!0}]])]),t("a",{class:"gray smaller",onClick:e[3]||(e[3]=b(l=>m.value=50,["prevent"]))},"reset")]),t("div",{class:"tw-flex tw-gap-2"},[e[5]||(e[5]=t("button",null,"Select",-1)),e[6]||(e[6]=t("button",null,"To Favorites",-1)),t("button",{onClick:D}," Reset ")])]),t("div",J,[e[8]||(e[8]=t("h6",null," Favorite locations ",-1)),t("ul",Q,[(r(!0),d(L,null,M(I(S).items,l=>(r(),d("li",{key:l.id},[t("a",{onClick:b(u=>F(l),["prevent"])},n(l.name),9,Z)]))),128))])])]),e[9]||(e[9]=t("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-40"},[t("i",{class:"fas fa-map-pin text-purple",style:{"font-size":"2rem"}})],-1))]))}});export{et as _};
