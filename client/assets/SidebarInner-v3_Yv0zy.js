import{d as L,r as h,z as H,D as b,o as d,c as u,E as K,G as B,i as q,y as z,A as F,x as J,l as y,b as e,e as c,H as O,t as v,B as x,I as T,h as f,J as U,K as j,n as A,w as k,L as M,F as R,q as G,M as W,s as Y}from"./index-mkT7MA7j.js";import{C as P}from"./ContenteditableBlock-nGHVXYZa.js";import{u as Q,_ as X,a as Z}from"./LazyRender.vue_vue_type_script_setup_true_lang-3iC2zlmN.js";import"./rangy-5rxgwlWZ.js";const tt=L({__name:"WaDropOnElement",props:{draggableEntityName:{}},emits:["drop"],setup(g,{emit:o}){const s=o,a=g,n=h(),{getDraggingEntityName:l}=Q();return H(()=>{b(n,"dragenter",t=>{a.draggableEntityName===l()&&t.currentTarget instanceof HTMLElement&&t.currentTarget.classList.add("dragover")}),b(n,"dragleave",t=>{if(t.currentTarget instanceof HTMLElement){if(t.relatedTarget&&t.currentTarget.contains(t.relatedTarget))return;t.currentTarget.classList.remove("dragover")}}),b(n,"dragover",t=>{t.preventDefault()}),b(n,"drop",t=>{if(a.draggableEntityName===l()&&t.currentTarget instanceof HTMLElement&&(t.preventDefault(),t.currentTarget.classList.remove("dragover"),t.dataTransfer))try{const p=JSON.parse(t.dataTransfer.getData("text/plain")).taskIds;s("drop",p)}catch{}})}),(t,p)=>(d(),u("div",{ref_key:"menuItemElementRef",ref:n},[K(t.$slots,"default")],512))}}),et={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},st={key:0},at={class:"hint"},nt={class:"hint"},ot={class:"hint"},it={class:"tw-flex tw-gap-4 tw-justify-between"},rt={key:0,class:"badge red"},lt={class:"tw-flex tw-gap-2"},ct=L({__name:"ListsListItem",props:{item:{}},setup(g,{expose:o}){const s=g,a=B(),n=q(),l=z(),t=h(!1);o({editMode:t});const p=m=>{a.updateItemName(s.item,m)},S=()=>{a.deleteItem(s.item),l.push({name:"lists"})},w=async m=>{await n.sort(s.item.id,null,m)},i=()=>{t.value=!1},_=async()=>{i(),l.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(m,r)=>{const V=F("RouterLink");return d(),J(tt,{"draggable-entity-name":"tasks",onDrop:w},{default:y(()=>{var N,E,I,C,$,D;return[e("div",et,[r[5]||(r[5]=e("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[e("i",{class:"fas fa-grip-vertical"})],-1)),e("div",null,[c(O).is_debug_mode?(d(),u("div",st,[e("span",at,"id: "+v((N=s.item)==null?void 0:N.id),1),r[1]||(r[1]=x(" | ")),e("span",nt,"prev_id: "+v(String((E=s.item)==null?void 0:E.prev_item_id)),1),r[2]||(r[2]=x(" | ")),e("span",ot,"srank: "+v(String((I=s.item)==null?void 0:I.sort))+" | "+v(String((C=c(a).getItemById(s.item.id))==null?void 0:C.rank)),1)])):T("",!0),e("div",it,[f(V,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:y(()=>[e("div",{class:U({"tw-bg-yellow":c(j)(c(l).currentRoute.value.params.id)===s.item.id||c(l).currentRoute.value.params.id===s.item.uuid})},[f(P,{value:m.item.name,editable:t.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:i,onUpdate:p,onKeydown:A(k(_,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),x(" "+v(($=s.item.extended_data)==null?void 0:$.items_count)+" ",1),(D=s.item.extended_data)!=null&&D.items_priority_count?(d(),u("div",rt,v(s.item.extended_data.items_priority_count),1)):T("",!0),e("div",lt,[e("a",{class:"count",onClick:r[0]||(r[0]=k(vt=>t.value=!t.value,["prevent"]))},r[3]||(r[3]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count",onClick:k(S,["prevent"])},r[4]||(r[4]=[e("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),dt={class:"heading black tw-m-0 tw-mb-2"},ut={class:"pl-bg-block"},pt={key:0,class:"tw-px-4 tw-py-3 gray"},mt=L({__name:"ListsList",props:{pocket:{}},setup(g){const o=g,s=M(),a=B(),n=h(!1),l=[],t=async()=>{await a.createList({pocket_id:o.pocket.id}),await G(),l.at(-1).editMode=!0},p=w=>{s.updateItemName(o.pocket,w)},S=()=>{s.deleteItem(o.pocket)};return(w,i)=>(d(),u(R,null,[e("h5",dt,[f(P,{value:o.pocket.name,tag:"span",editable:n.value,focusable:!0,placeholder:"New Pocket",onBlur:i[0]||(i[0]=_=>n.value=!1),onUpdate:p},null,8,["value","editable"]),e("a",{class:"count",onClick:i[1]||(i[1]=k(_=>n.value=!n.value,["prevent"]))},i[2]||(i[2]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count action",onClick:k(t,["prevent"])},i[3]||(i[3]=[e("i",{class:"fas fa-plus-circle"},null,-1)])),e("a",{class:"count action",onClick:k(S,["prevent"])},i[4]||(i[4]=[e("i",{class:"fas fa-trash-alt"},null,-1)]))]),e("div",ut,[f(Z,{items:c(a).getListsInPocket(o.pocket.id),"sortable-list-id":o.pocket.id,"sortable-group-name":"lists",onSort:c(a).sort},{default:y(({item:_})=>[f(X,{style:{height:"70px"}},{default:y(()=>[f(ct,{ref:m=>l.push(m),item:_},null,8,["item"])]),_:2},1024)]),_:1},8,["items","sortable-list-id","onSort"]),c(a).getListsInPocket(o.pocket.id).length?T("",!0):(d(),u("div",pt," No Lists Yet "))])],64))}}),ft={class:"tw-gap-4"},gt={class:"align-center"},yt=L({__name:"SidebarInner",setup(g){const o=M();return(s,a)=>(d(),u("div",ft,[a[2]||(a[2]=W('<form class="state-with-inner-icon right tw-w-full"><input type="search" placeholder="Search" class="tw-w-full"><button class="icon"><i class="fas fa-search"></i></button></form><div class="bricks tw-ml-0 -tw-mr-3"><div class="brick pl-bg-block"><span class="icon"><i class="fas fa-star"></i></span><span class="count">495</span> Star </div><div class="brick pl-bg-block"><span class="icon"><i class="fas fa-bolt"></i></span><span class="count">33</span> Bolt </div></div>',2)),(d(!0),u(R,null,Y(c(o).items,n=>(d(),u("div",{key:n.uuid||n.id},[f(mt,{pocket:n},null,8,["pocket"])]))),128)),e("div",gt,[e("button",{class:"gray",onClick:a[0]||(a[0]=n=>c(o).createPocket())},a[1]||(a[1]=[e("i",{class:"fa fa-plus"},null,-1)]))])]))}});export{yt as default};
