import{_ as M,o as c,h as g,I as x,e as k,r as b,w as V,n as R,C as $,k as f,A as E,J as P,z as F,K as _,L as N,M as H,i as t,t as v,G as w,p,j as m,N as y,O as j,F as B,P as J,m as O}from"./index-R3wHp6Nq.js";import{_ as W}from"./VerticalGap.vue_vue_type_script_setup_true_lang-gqIWhvc6.js";import{u as z}from"./task-7epW-GX-.js";import{u as A,_ as G}from"./SortableList.vue_vue_type_style_index_0_lang-HFuvK6fr.js";const K={},U={class:"bricks"};function Y(u,r){return c(),g("div",U,r[0]||(r[0]=[x('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const q=M(K,[["render",Y],["__scopeId","data-v-53ea13ed"]]),C=k({__name:"ContenteditableBlock",props:{editable:{type:Boolean},focusable:{type:Boolean},tag:{}},emits:["update","blur"],setup(u,{emit:r}){const i=r,s=u,e=b(),l=b(""),d=a=>{l.value=a.target.innerText},n=a=>{i("blur");const o=a.target.innerText;o!==l.value&&i("update",o)};return V(()=>[s.editable,s.focusable],([a,o])=>{a&&o&&e.value&&R(()=>{e.value.focus()})}),(a,o)=>(c(),$(P(s.tag),{ref_key:"contenteditableRef",ref:e,contenteditable:s.editable,onFocus:d,onBlur:n},{default:f(()=>[E(a.$slots,"default")]),_:3},40,["contenteditable"]))}}),Q=k({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(u,{emit:r}){const i=r,s=u,e=b(),{draggableEntity:l}=A();return F(()=>{if(e.value){const d=e.value;_(d,"dragenter",n=>{s.draggableEntityName===l.value&&n.currentTarget instanceof HTMLElement&&n.currentTarget.classList.add("dragover")}),_(d,"dragleave",n=>{s.draggableEntityName===l.value&&n.currentTarget instanceof HTMLElement&&n.target===n.currentTarget&&n.currentTarget.classList.remove("dragover")}),_(d,"dragover",n=>{n.preventDefault()}),_(d,"drop",n=>{if(s.draggableEntityName===l.value&&n.currentTarget instanceof HTMLElement&&(n.preventDefault(),n.currentTarget.classList.remove("dragover"),n.dataTransfer))try{const a=JSON.parse(n.dataTransfer.getData("Text")).taskIds;i("drop",a)}catch{}})}}),(d,n)=>(c(),g("div",{ref_key:"menuItemElementRef",ref:e},[E(d.$slots,"default")],512))}}),X={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},Z={class:"hint"},tt={class:"hint"},et={class:"hint"},st={class:"tw-flex tw-gap-4 tw-justify-between"},at={class:"tw-flex tw-gap-2"},nt=k({__name:"ListsListItem",props:{item:{}},setup(u){const r=u,i=N(),s=z(),e=b(!1),l=a=>{i.updateItemName(r.item,a)},d=()=>{i.deleteItem(r.item)},n=async a=>{await s.sort(r.item.id,null,a)};return(a,o)=>{const D=H("RouterLink");return c(),$(Q,{"draggable-entity-name":"tasks",onDrop:n},{default:f(()=>{var L,I,S,T;return[t("div",X,[o[6]||(o[6]=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1)),t("div",null,[t("div",null,[t("span",Z,"id: "+v((L=a.$props.item)==null?void 0:L.id),1),o[2]||(o[2]=w(" | ")),t("span",tt,"prev_id: "+v(String((I=a.$props.item)==null?void 0:I.prev_item_id)),1),o[3]||(o[3]=w(" | ")),t("span",et,"srank: "+v(String((S=a.$props.item)==null?void 0:S.sort))+" | "+v(String((T=p(i).getItemById(a.$props.item.id))==null?void 0:T.rank)),1)]),t("div",st,[m(D,{to:{name:"list",params:{id:a.$props.item.id}}},{default:f(()=>[t("div",null,[m(C,{editable:e.value,focusable:!0,tag:"span",onBlur:o[0]||(o[0]=h=>e.value=!1),onUpdate:l},{default:f(()=>[w(v(a.item.name),1)]),_:1},8,["editable"])])]),_:1},8,["to"]),t("div",at,[t("a",{class:"count",onClick:o[1]||(o[1]=y(h=>e.value=!e.value,["prevent"]))},o[4]||(o[4]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count",onClick:y(d,["prevent"])},o[5]||(o[5]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),ot={class:"heading black tw-m-0 tw-mb-2"},rt={class:"pl-bg-block"},it={key:0,class:"tw-px-4 tw-py-3 gray"},lt=k({__name:"ListsList",props:{pocketId:{},title:{}},setup(u){const r=N(),i=b(!1);return(s,e)=>(c(),g(B,null,[t("h5",ot,[m(C,{tag:"span",editable:i.value,focusable:!0},{default:f(()=>[w(v(s.title),1)]),_:1},8,["editable"]),t("a",{class:"count",onClick:e[0]||(e[0]=y(l=>i.value=!i.value,["prevent"]))},e[2]||(e[2]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count action",onClick:e[1]||(e[1]=y(l=>p(r).createList({pocket_id:s.pocketId}),["prevent"]))},e[3]||(e[3]=[t("i",{class:"fas fa-plus-circle"},null,-1)]))]),t("div",rt,[m(G,{items:p(r).getListsInPocket(s.pocketId),"sortable-list-id":s.pocketId,"sortable-group-name":"lists",onSort:p(r).sort},{default:f(({item:l})=>[m(nt,{item:l},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),p(r).getListsInPocket(s.pocketId).length?j("",!0):(c(),g("div",it," No Lists Yet "))])],64))}}),dt={class:"align-center"},mt=k({__name:"InnerSidebar",setup(u){const r=J();return(i,s)=>(c(),$(W,{space:4},{default:f(()=>[s[2]||(s[2]=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1)),m(q),(c(!0),g(B,null,O(p(r).pockets,e=>(c(),g("div",{key:e.id},[m(lt,{title:e.name,"pocket-id":e.id},null,8,["title","pocket-id"])]))),128)),t("div",dt,[t("button",{class:"gray",onClick:s[0]||(s[0]=e=>p(r).createPocket())},s[1]||(s[1]=[t("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{mt as default};
