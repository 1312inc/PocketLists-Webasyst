import{_ as B,o as u,h as v,I as F,e as $,r as y,w as N,n as D,C as T,t as _,J as H,K as M,z as j,L as h,A as z,M as R,y as J,N as O,k as I,i as e,G as x,p as f,j as b,O as W,s as q,P as w,F as V,Q as A,m as G}from"./index-F394ztHU.js";import{_ as Q}from"./VerticalGap.vue_vue_type_script_setup_true_lang-KIsksek5.js";import{m as U,u as Y,p as X,_ as Z}from"./SortableList.vue_vue_type_style_index_0_lang-Vto9VKmj.js";import{u as ee}from"./task-bCco29WL.js";const te={},se={class:"bricks"};function ae(p,i){return u(),v("div",se,i[0]||(i[0]=[F('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const ne=B(te,[["render",ae],["__scopeId","data-v-53ea13ed"]]),oe={class:"tw-relative tw-w-full"},re=["textContent"],le=$({__name:"ContenteditableBlock",props:{value:{},editable:{type:Boolean},focusable:{type:Boolean},placeholder:{},tag:{}},emits:["update"],setup(p,{emit:i}){const r=i,s=p,n=y(),l=y(!1);let a="";const t=d=>{a=d.target.innerText},m=d=>{const g=d.target.innerText;g!==a&&r("update",g)},k=d=>{l.value=!d.target.innerText};return N([()=>s.editable,()=>s.focusable],([d,g])=>{d&&g&&D(()=>{var o;(o=n.value)==null||o.focus(),n.value&&U(n.value)})}),N(()=>s.value,d=>{l.value=!d},{immediate:!0}),(d,g)=>(u(),v("div",oe,[(u(),T(H(s.tag),{ref_key:"contenteditableRef",ref:n,contenteditable:s.editable,onFocus:t,onBlur:m,onInput:k,textContent:_(s.value)},null,40,["contenteditable","textContent"])),l.value?(u(),v("div",{key:0,class:"placeholder",textContent:_(s.placeholder)},null,8,re)):M("",!0)]))}}),P=B(le,[["__scopeId","data-v-72186e9d"]]),ie=$({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(p,{emit:i}){const r=i,s=p,n=y(),{draggableEntity:l}=Y();return j(()=>{if(n.value){const a=n.value;h(a,"dragenter",t=>{s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&t.currentTarget.classList.add("dragover")}),h(a,"dragleave",t=>{s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&t.target===t.currentTarget&&t.currentTarget.classList.remove("dragover")}),h(a,"dragover",t=>{t.preventDefault()}),h(a,"drop",t=>{if(s.draggableEntityName===l.value&&t.currentTarget instanceof HTMLElement&&(t.preventDefault(),t.currentTarget.classList.remove("dragover"),t.dataTransfer))try{const m=JSON.parse(t.dataTransfer.getData("Text")).taskIds;r("drop",m)}catch{}})}}),(a,t)=>(u(),v("div",{ref_key:"menuItemElementRef",ref:n},[z(a.$slots,"default")],512))}}),de={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},ce={class:"hint"},ue={class:"hint"},pe={class:"hint"},me={class:"tw-flex tw-gap-4 tw-justify-between"},fe={class:"tw-flex tw-gap-2"},ve=$({__name:"ListsListItem",props:{item:{}},setup(p,{expose:i}){const r=p,s=R(),n=ee(),l=J(),a=y(!1);i({editMode:a});const t=o=>{s.updateItemName(r.item,o)},m=()=>{s.deleteItem(r.item),l.push({name:"lists"})},k=async o=>{await n.sort(r.item.id,null,o)},d=()=>{a.value=!1},g=async()=>{d(),l.push({name:"list",params:{id:r.item.id},query:{addNewTask:1}})};return(o,c)=>{const K=O("RouterLink");return u(),T(ie,{"draggable-entity-name":"tasks",onDrop:k},{default:I(()=>{var C,L,S,E;return[e("div",de,[c[5]||(c[5]=e("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[e("i",{class:"fas fa-grip-vertical"})],-1)),e("div",null,[e("div",null,[e("span",ce,"id: "+_((C=o.$props.item)==null?void 0:C.id),1),c[1]||(c[1]=x(" | ")),e("span",ue,"prev_id: "+_(String((L=o.$props.item)==null?void 0:L.prev_item_id)),1),c[2]||(c[2]=x(" | ")),e("span",pe,"srank: "+_(String((S=o.$props.item)==null?void 0:S.sort))+" | "+_(String((E=f(s).getItemById(o.$props.item.id))==null?void 0:E.rank)),1)]),e("div",me,[b(K,{to:{name:"list",params:{id:o.$props.item.id}},class:"tw-flex-auto"},{default:I(()=>[e("div",{class:W({"tw-bg-yellow":f(X)(f(l).currentRoute.value.params.id)===o.$props.item.id||f(l).currentRoute.value.params.id===o.$props.item.uuid})},[b(P,{value:o.item.name,editable:a.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:d,onUpdate:t,onKeydown:q(w(g,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),e("div",fe,[e("a",{class:"count",onClick:c[0]||(c[0]=w(ye=>a.value=!a.value,["prevent"]))},c[3]||(c[3]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count",onClick:w(m,["prevent"])},c[4]||(c[4]=[e("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),ge={class:"heading black tw-m-0 tw-mb-2"},be={class:"pl-bg-block"},_e={key:0,class:"tw-px-4 tw-py-3 gray"},ke=$({__name:"ListsList",props:{pocketId:{},title:{}},setup(p){const i=p,r=R(),s=y(!1),n=[],l=async()=>{await r.createList({pocket_id:i.pocketId}),await D(),n.at(-1).editMode=!0};return(a,t)=>(u(),v(V,null,[e("h5",ge,[b(P,{value:a.title,tag:"span",editable:s.value,focusable:!0},null,8,["value","editable"]),e("a",{class:"count",onClick:t[0]||(t[0]=w(m=>s.value=!s.value,["prevent"]))},t[1]||(t[1]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count action",onClick:w(l,["prevent"])},t[2]||(t[2]=[e("i",{class:"fas fa-plus-circle"},null,-1)]))]),e("div",be,[b(Z,{items:f(r).getListsInPocket(a.pocketId),"sortable-list-id":a.pocketId,"sortable-group-name":"lists",onSort:f(r).sort},{default:I(({item:m})=>[b(ve,{ref:k=>n.push(k),item:m},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),f(r).getListsInPocket(a.pocketId).length?M("",!0):(u(),v("div",_e," No Lists Yet "))])],64))}}),we={class:"align-center"},Ce=$({__name:"InnerSidebar",setup(p){const i=A();return(r,s)=>(u(),T(Q,{space:4},{default:I(()=>[s[2]||(s[2]=e("form",{class:"state-with-inner-icon right tw-w-full"},[e("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),e("button",{class:"icon"},[e("i",{class:"fas fa-search"})])],-1)),b(ne),(u(!0),v(V,null,G(f(i).pockets,n=>(u(),v("div",{key:n.uuid||n.id},[b(ke,{title:n.name,"pocket-id":n.id},null,8,["title","pocket-id"])]))),128)),e("div",we,[e("button",{class:"gray",onClick:s[0]||(s[0]=n=>f(i).createPocket())},s[1]||(s[1]=[e("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{Ce as default};
