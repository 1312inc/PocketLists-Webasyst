import{_ as K,o as c,c as u,E as q,d as x,r as N,z,G as w,A as F,H as D,i as J,y as U,B as W,x as M,l as y,b as t,e as d,I as j,t as g,C as S,J as T,h as v,K as A,L as G,n as O,w as _,M as R,F as P,q as Y,s as Q}from"./index-FkpaG5ib.js";import{_ as X}from"./VerticalGap.vue_vue_type_script_setup_true_lang-AcWdamdy.js";import{C as V}from"./ContenteditableBlock-X6REIlsQ.js";import{u as Z,_ as tt}from"./SortableList.vue_vue_type_style_index_0_lang-TZjdAHBf.js";import"./rangy-5rxgwlWZ.js";const et={},st={class:"bricks"};function at(p,n){return c(),u("div",st,n[0]||(n[0]=[q('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const nt=K(et,[["render",at],["__scopeId","data-v-53ea13ed"]]),ot=x({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(p,{emit:n}){const s=n,a=p,o=N(),{getDraggingEntityName:l}=Z();return z(()=>{w(o,"dragenter",e=>{a.draggableEntityName===l()&&e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.add("dragover")}),w(o,"dragleave",e=>{if(e.currentTarget instanceof HTMLElement){if(e.relatedTarget&&e.currentTarget.contains(e.relatedTarget))return;e.currentTarget.classList.remove("dragover")}}),w(o,"dragover",e=>{e.preventDefault()}),w(o,"drop",e=>{if(a.draggableEntityName===l()&&e.currentTarget instanceof HTMLElement&&(e.preventDefault(),e.currentTarget.classList.remove("dragover"),e.dataTransfer))try{const m=JSON.parse(e.dataTransfer.getData("text/plain")).taskIds;s("drop",m)}catch{}})}),(e,m)=>(c(),u("div",{ref_key:"menuItemElementRef",ref:o},[F(e.$slots,"default")],512))}}),rt={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},it={key:0},lt={class:"hint"},dt={class:"hint"},ct={class:"hint"},ut={class:"tw-flex tw-gap-4 tw-justify-between"},pt={key:0,class:"badge red"},mt={class:"tw-flex tw-gap-2"},ft=x({__name:"ListsListItem",props:{item:{}},setup(p,{expose:n}){const s=p,a=D(),o=J(),l=U(),e=N(!1);n({editMode:e});const m=f=>{a.updateItemName(s.item,f)},L=()=>{a.deleteItem(s.item),l.push({name:"lists"})},b=async f=>{await o.sort(s.item.id,null,f)},r=()=>{e.value=!1},k=async()=>{r(),l.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(f,i)=>{const H=W("RouterLink");return c(),M(ot,{"draggable-entity-name":"tasks",onDrop:b},{default:y(()=>{var I,C,$,h,E,B;return[t("div",rt,[i[5]||(i[5]=t("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[t("i",{class:"fas fa-grip-vertical"})],-1)),t("div",null,[d(j).is_debug_mode?(c(),u("div",it,[t("span",lt,"id: "+g((I=s.item)==null?void 0:I.id),1),i[1]||(i[1]=S(" | ")),t("span",dt,"prev_id: "+g(String((C=s.item)==null?void 0:C.prev_item_id)),1),i[2]||(i[2]=S(" | ")),t("span",ct,"srank: "+g(String(($=s.item)==null?void 0:$.sort))+" | "+g(String((h=d(a).getItemById(s.item.id))==null?void 0:h.rank)),1)])):T("",!0),t("div",ut,[v(H,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:y(()=>[t("div",{class:A({"tw-bg-yellow":d(G)(d(l).currentRoute.value.params.id)===s.item.id||d(l).currentRoute.value.params.id===s.item.uuid})},[v(V,{value:f.item.name,editable:e.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:r,onUpdate:m,onKeydown:O(_(k,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),S(" "+g((E=s.item.extended_data)==null?void 0:E.count)+" ",1),(B=s.item.extended_data)!=null&&B.priority_count?(c(),u("div",pt,g(s.item.extended_data.priority_count),1)):T("",!0),t("div",mt,[t("a",{class:"count",onClick:i[0]||(i[0]=_(wt=>e.value=!e.value,["prevent"]))},i[3]||(i[3]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count",onClick:_(L,["prevent"])},i[4]||(i[4]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),vt={class:"heading black tw-m-0 tw-mb-2"},gt={class:"pl-bg-block"},_t={key:0,class:"tw-px-4 tw-py-3 gray"},kt=x({__name:"ListsList",props:{pocket:{}},setup(p){const n=p,s=R(),a=D(),o=N(!1),l=[],e=async()=>{await a.createList({pocket_id:n.pocket.id}),await Y(),l.at(-1).editMode=!0},m=b=>{s.updateItemName(n.pocket,b)},L=()=>{s.deleteItem(n.pocket)};return(b,r)=>(c(),u(P,null,[t("h5",vt,[v(V,{value:n.pocket.name,tag:"span",editable:o.value,focusable:!0,placeholder:"New Pocket",onBlur:r[0]||(r[0]=k=>o.value=!1),onUpdate:m},null,8,["value","editable"]),t("a",{class:"count",onClick:r[1]||(r[1]=_(k=>o.value=!o.value,["prevent"]))},r[2]||(r[2]=[t("i",{class:"fas fa-pen"},null,-1)])),t("a",{class:"count action",onClick:_(e,["prevent"])},r[3]||(r[3]=[t("i",{class:"fas fa-plus-circle"},null,-1)])),t("a",{class:"count action",onClick:_(L,["prevent"])},r[4]||(r[4]=[t("i",{class:"fas fa-trash-alt"},null,-1)]))]),t("div",gt,[v(tt,{items:d(a).getListsInPocket(n.pocket.id),"sortable-list-id":n.pocket.id,"sortable-group-name":"lists",onSort:d(a).sort},{default:y(({item:k})=>[v(ft,{ref:f=>l.push(f),item:k},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),d(a).getListsInPocket(n.pocket.id).length?T("",!0):(c(),u("div",_t," No Lists Yet "))])],64))}}),bt={class:"align-center"},Nt=x({__name:"InnerSidebar",setup(p){const n=R();return(s,a)=>(c(),M(X,{space:4},{default:y(()=>[a[2]||(a[2]=t("form",{class:"state-with-inner-icon right tw-w-full"},[t("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),t("button",{class:"icon"},[t("i",{class:"fas fa-search"})])],-1)),v(nt),(c(!0),u(P,null,Q(d(n).items,o=>(c(),u("div",{key:o.uuid||o.id},[v(kt,{pocket:o},null,8,["pocket"])]))),128)),t("div",bt,[t("button",{class:"gray",onClick:a[0]||(a[0]=o=>d(n).createPocket())},a[1]||(a[1]=[t("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{Nt as default};
