import{_ as K,o as d,c as u,E as P,d as w,r as S,z as q,G as k,A as z,H as B,i as F,y as J,B as W,x as D,l as b,b as e,e as l,I as j,t as f,C as L,J as I,h as m,K as A,L as G,n as O,w as g,F as M,q as U,M as Y,s as Q}from"./index-UtBtFXNb.js";import{_ as X}from"./VerticalGap.vue_vue_type_script_setup_true_lang-gnNTcDHS.js";import{C as R}from"./ContenteditableBlock-1F9LSScb.js";import{u as Z,_ as tt}from"./SortableList.vue_vue_type_style_index_0_lang-xRAHXAnq.js";import"./rangy-5rxgwlWZ.js";const et={},st={class:"bricks"};function at(p,i){return d(),u("div",st,i[0]||(i[0]=[P('<div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-star" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>495</span> Star </div><div class="brick pl-bg-block" data-v-53ea13ed><span class="icon" data-v-53ea13ed><i class="fas fa-bolt" data-v-53ea13ed></i></span><span class="count" data-v-53ea13ed>33</span> Bolt </div>',2)]))}const nt=K(et,[["render",at],["__scopeId","data-v-53ea13ed"]]),rt=w({__name:"WaDrop",props:{draggableEntityName:{}},emits:["drop"],setup(p,{emit:i}){const s=i,a=p,n=S(),{getDraggingEntityName:c}=Z();return q(()=>{k(n,"dragenter",t=>{a.draggableEntityName===c()&&t.currentTarget instanceof HTMLElement&&t.currentTarget.classList.add("dragover")}),k(n,"dragleave",t=>{if(t.currentTarget instanceof HTMLElement){if(t.relatedTarget&&t.currentTarget.contains(t.relatedTarget))return;t.currentTarget.classList.remove("dragover")}}),k(n,"dragover",t=>{t.preventDefault()}),k(n,"drop",t=>{if(a.draggableEntityName===c()&&t.currentTarget instanceof HTMLElement&&(t.preventDefault(),t.currentTarget.classList.remove("dragover"),t.dataTransfer))try{const r=JSON.parse(t.dataTransfer.getData("text/plain")).taskIds;s("drop",r)}catch{}})}),(t,r)=>(d(),u("div",{ref_key:"menuItemElementRef",ref:n},[z(t.$slots,"default")],512))}}),ot={class:"tw-group tw-relative tw-py-4 tw-px-6 -tw-mx-6"},it={key:0},lt={class:"hint"},dt={class:"hint"},ct={class:"hint"},ut={class:"tw-flex tw-gap-4 tw-justify-between"},pt={key:0,class:"badge red"},mt={class:"tw-flex tw-gap-2"},ft=w({__name:"ListsListItem",props:{item:{}},setup(p,{expose:i}){const s=p,a=B(),n=F(),c=J(),t=S(!1);i({editMode:t});const r=v=>{a.updateItemName(s.item,v)},_=()=>{a.deleteItem(s.item),c.push({name:"lists"})},y=async v=>{await n.sort(s.item.id,null,v)},T=()=>{t.value=!1},V=async()=>{T(),c.push({name:"list",params:{id:s.item.id},query:{addNewTask:1}})};return(v,o)=>{const H=W("RouterLink");return d(),D(rt,{"draggable-entity-name":"tasks",onDrop:y},{default:b(()=>{var h,x,N,C,E,$;return[e("div",ot,[o[5]||(o[5]=e("div",{class:"sortable-handle tw-cursor-grabbing tw-absolute -tw-translate-x-4 tw-hidden group-hover:tw-block"},[e("i",{class:"fas fa-grip-vertical"})],-1)),e("div",null,[l(j).is_debug_mode?(d(),u("div",it,[e("span",lt,"id: "+f((h=s.item)==null?void 0:h.id),1),o[1]||(o[1]=L(" | ")),e("span",dt,"prev_id: "+f(String((x=s.item)==null?void 0:x.prev_item_id)),1),o[2]||(o[2]=L(" | ")),e("span",ct,"srank: "+f(String((N=s.item)==null?void 0:N.sort))+" | "+f(String((C=l(a).getItemById(s.item.id))==null?void 0:C.rank)),1)])):I("",!0),e("div",ut,[m(H,{to:{name:"list",params:{id:s.item.id}},class:"tw-flex-auto"},{default:b(()=>[e("div",{class:A({"tw-bg-yellow":l(G)(l(c).currentRoute.value.params.id)===s.item.id||l(c).currentRoute.value.params.id===s.item.uuid})},[m(R,{value:v.item.name,editable:t.value,focusable:!0,placeholder:"New list",tag:"span",onBlur:T,onUpdate:r,onKeydown:O(g(V,["prevent"]),["enter"])},null,8,["value","editable","onKeydown"])],2)]),_:1},8,["to"]),L(" "+f((E=s.item.extended_data)==null?void 0:E.count)+" ",1),($=s.item.extended_data)!=null&&$.priority_count?(d(),u("div",pt,f(s.item.extended_data.priority_count),1)):I("",!0),e("div",mt,[e("a",{class:"count",onClick:o[0]||(o[0]=g(wt=>t.value=!t.value,["prevent"]))},o[3]||(o[3]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count",onClick:g(_,["prevent"])},o[4]||(o[4]=[e("i",{class:"fas fa-trash-alt"},null,-1)]))])])])])]}),_:1})}}}),vt={class:"heading black tw-m-0 tw-mb-2"},gt={class:"pl-bg-block"},_t={key:0,class:"tw-px-4 tw-py-3 gray"},kt=w({__name:"ListsList",props:{pocketId:{},title:{}},setup(p){const i=p,s=B(),a=S(!1),n=[],c=async()=>{await s.createList({pocket_id:i.pocketId}),await U(),n.at(-1).editMode=!0};return(t,r)=>(d(),u(M,null,[e("h5",vt,[m(R,{value:t.title,tag:"span",editable:a.value,focusable:!0},null,8,["value","editable"]),e("a",{class:"count",onClick:r[0]||(r[0]=g(_=>a.value=!a.value,["prevent"]))},r[1]||(r[1]=[e("i",{class:"fas fa-pen"},null,-1)])),e("a",{class:"count action",onClick:g(c,["prevent"])},r[2]||(r[2]=[e("i",{class:"fas fa-plus-circle"},null,-1)]))]),e("div",gt,[m(tt,{items:l(s).getListsInPocket(t.pocketId),"sortable-list-id":t.pocketId,"sortable-group-name":"lists",onSort:l(s).sort},{default:b(({item:_})=>[m(ft,{ref:y=>n.push(y),item:_},null,8,["item"])]),_:1},8,["items","sortable-list-id","onSort"]),l(s).getListsInPocket(t.pocketId).length?I("",!0):(d(),u("div",_t," No Lists Yet "))])],64))}}),bt={class:"align-center"},ht=w({__name:"InnerSidebar",setup(p){const i=Y();return(s,a)=>(d(),D(X,{space:4},{default:b(()=>[a[2]||(a[2]=e("form",{class:"state-with-inner-icon right tw-w-full"},[e("input",{type:"search",placeholder:"Search",class:"tw-w-full"}),e("button",{class:"icon"},[e("i",{class:"fas fa-search"})])],-1)),m(nt),(d(!0),u(M,null,Q(l(i).pockets,n=>(d(),u("div",{key:n.uuid||n.id},[m(kt,{title:n.name,"pocket-id":n.id},null,8,["title","pocket-id"])]))),128)),e("div",bt,[e("button",{class:"gray",onClick:a[0]||(a[0]=n=>l(i).createPocket())},a[1]||(a[1]=[e("i",{class:"fa fa-plus"},null,-1)]))])]),_:1}))}});export{ht as default};
